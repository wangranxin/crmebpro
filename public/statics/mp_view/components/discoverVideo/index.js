(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/discoverVideo/index"],{"0e63":function(t,e,i){"use strict";i.r(e);var n=i("6c64"),r=i.n(n);for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(s);e["default"]=r.a},"5e30":function(t,e,i){"use strict";i.r(e);var n=i("7253"),r=i("0e63");for(var s in r)["default"].indexOf(s)<0&&function(t){i.d(e,t,(function(){return r[t]}))}(s);i("fe66");var o=i("828b"),a=Object(o["a"])(r["default"],n["b"],n["c"],!1,null,"4f0e9f72",null,!1,n["a"],void 0);e["default"]=a.exports},"6c64":function(t,e,i){"use strict";(function(t){var n=i("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(i("7ca3")),s=(i("4d38"),i("0f73")),o=i("eb8a"),a=i("8f59"),u=i("5088");function c(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?c(Object(i),!0).forEach((function(e){(0,r.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var d=t.getWindowInfo().statusBarHeight,l={name:"discoverSwiperVideo",props:{swiperData:{type:Array,default:function(){return[]}},showFooter:{type:Boolean,default:!1},fullVideo:{type:Boolean,default:!1},replyStatus:{type:Number,default:1},addReply:{type:Number,default:1}},data:function(){return{sysHeight:d,swiperCurrent:0,imgList:[],imgCurrent:0,isPlay:!1,showProDrawer:!1,productList:[],showBubble:!1,showReply:!1,community_id:"",comment_num:"",currentData:{author:"",author_image:"",title:"",content:"",product:[],slider_image:[],is_follow:0,is_self:0},showDelete:!1,isExpanded:!1,startY:0,moveY:0,threshold:50}},components:{emptyPage:function(){i.e("components/emptyPage").then(function(){return resolve(i("398a"))}.bind(null,i)).catch(i.oe)},replyList:function(){i.e("components/discoverVideo/replyList").then(function(){return resolve(i("8d38"))}.bind(null,i)).catch(i.oe)},tuiModal:function(){i.e("components/tui-modal/index").then(function(){return resolve(i("6b9f"))}.bind(null,i)).catch(i.oe)},BaseTextMore:function(){i.e("components/BaseTextMore").then(function(){return resolve(i("c682"))}.bind(null,i)).catch(i.oe)}},watch:{swiperData:{handler:function(t){this.currentData=t[this.swiperCurrent],this.currentData&&this.currentData.slider_image&&this.currentData.slider_image.length&&(this.imgList=this.currentData.slider_image),this.currentData&&this.lookVideo()},immediate:!0}},computed:h(h({},(0,a.mapGetters)(["isLogin","uid"])),{},{dotWidth:function(){var e=t.getWindowInfo().windowWidth;return(2*e-(20+12*this.imgList.length))/this.imgList.length},showMore:function(){return!(!this.currentData||this.currentData.relation_id!=this.uid||!this.isLogin)}}),methods:{handleTouchStart:function(t){this.startY=t.touches[0].pageY},handleTouchMove:function(t){this.moveY=t.touches[0].pageY},handleTouchEnd:function(){var t=this.moveY-this.startY;t>this.threshold?this.swiperCurrent>0&&this.videoChange({detail:{current:this.swiperCurrent-1}}):t<-this.threshold&&this.videoChange({detail:{current:this.swiperCurrent+1}})},backPage:function(){var e=getCurrentPages();e.length>1?t.navigateBack():t.switchTab({url:"/pages/index/index"})},playVideo:function(){t.createVideoContext(this.swiperData[this.swiperCurrent].id+"k"+this.swiperCurrent,this).play(),this.isPlay=!0},tapVideoHover:function(e){this.isPlay?(t.createVideoContext(this.swiperData[this.swiperCurrent].id+"k"+this.swiperCurrent,this).pause(),this.isPlay=!1):(t.createVideoContext(this.swiperData[this.swiperCurrent].id+"k"+this.swiperCurrent,this).play(),this.isPlay=!0)},ended:function(){},videoChange:function(e){var i=e.detail.current;this.swiperCurrent!==i&&(t.createVideoContext(this.swiperData[this.swiperCurrent].id+"k"+this.swiperCurrent,this).pause(),this.swiperCurrent=i,t.createVideoContext(this.swiperData[this.swiperCurrent].id+"k"+this.swiperCurrent,this).play(),this.currentData=this.swiperData[this.swiperCurrent],this.showBubble=!1,this.$emit("onSwiper",this.swiperCurrent)),this.swiperData[this.swiperCurrent].slider_image.length?this.imgList=this.swiperData[this.swiperCurrent].slider_image:this.imgList=[],this.imgCurrent=0,this.lookVideo()},lookVideo:function(){this.isLogin&&(0,o.communityBrowseApi)(this.currentData.id).catch((function(t){}))},photoChange:function(t){this.imgCurrent=t.detail.current},goDetail:function(t){var e="/pages/goods_details/index?id=".concat(t);this.$util.JumpPath(e)},editTo:function(){t.navigateTo({url:"/pages/discover/discoverCreate/index?id="+this.currentData.id})},delContent:function(){this.showDelete=!0,this.showBubble=!1},handleDelete:function(t){var e=this,i=t.index;1==i?(0,o.communityDeleteApi)(this.currentData.id).then((function(t){return e.showDelete=!1,e.$util.Tips({title:t.msg},{tab:4,url:"/pages/discoverIndex/index"})})).catch((function(t){return e.showDelete=!1,e.$util.Tips({title:t})})):this.showDelete=!1},getProList:function(){var t=this,e={ids:this.currentData.product_id.toString()};(0,s.getProductslist)(e).then((function(e){t.productList=e.data,t.showProDrawer=!0}))},toUser:function(){t.navigateTo({url:"/pages/discover/discoverUser/index?id="+this.currentData.relation_id})},authTo:function(e){t.navigateTo({url:e})},toggleReplyDrawer:function(){this.community_id=this.currentData.id,this.comment_num=this.currentData.comment_num,this.isLogin?this.showReply=!0:(0,u.toLogin)()},contentLike:function(){var t=this;this.isLogin||(0,u.toLogin)();var e=this.currentData.id,i=1==this.currentData.is_like?0:1,n=this;(0,o.communityLikeApi)(e,{status:i}).then((function(t){n.$emit("onLike",{index:n.swiperCurrent,status:i})})).catch((function(e){return t.$util.Tips({title:e})}))},closeDrawer:function(){this.showReply=!1,this.showProDrawer=!1},followFun:function(){var t=this;this.isLogin||(0,u.toLogin)(),(0,o.communitySetInsterestApi)(this.currentData.relation_id,{status:1}).then((function(e){t.$emit("followChange",{index:t.swiperCurrent})})).catch((function(e){return t.$util.Tips({title:e})}))},commentAdd:function(t){1==t.type?this.comment_num++:this.comment_num=this.comment_num-t.num},openShare:function(){this.isLogin?((0,o.communityShareApi)(this.currentData.id).catch((function(t){})),this.$emit("onShare",this.currentData)):(0,u.toLogin)()}}};e.default=l}).call(this,i("df3c")["default"])},7253:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,i=(t._self._c,t.currentData&&t.currentData.product&&t.currentData.product.length),n=t.showMore&&!t.currentData.product.length,r=t.currentData&&t.currentData.product&&t.currentData.product.length,s=t.imgList.length&&t.imgList.length>1,o=t.productList.length;t._isMounted||(t.e0=function(){t.showBubble=!t.showBubble}),t.$mp.data=Object.assign({},{$root:{g0:i,g1:n,g2:r,g3:s,g4:o}})},r=[]},f6d1:function(t,e,i){},fe66:function(t,e,i){"use strict";var n=i("f6d1"),r=i.n(n);r.a}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/discoverVideo/index-create-component',
    {
        'components/discoverVideo/index-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('df3c')['createComponent'](__webpack_require__("5e30"))
        })
    },
    [['components/discoverVideo/index-create-component']]
]);
