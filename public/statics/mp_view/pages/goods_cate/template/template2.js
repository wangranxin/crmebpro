(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods_cate/template/template2"],{"34cb":function(t,e,i){"use strict";var r=i("c59f"),a=i.n(r);a.a},"47fd":function(t,e,i){"use strict";(function(t){var r=i("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(i("3b2d")),n=r(i("7ca3")),s=i("0f73"),c=i("606e"),o=i("8f59"),u=i("95b5"),l=(i("5088"),r(i("018e")));function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function d(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach((function(e){(0,n.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var f=t.getWindowInfo().windowHeight,p=t.getWindowInfo().statusBarHeight,g={props:{level:{type:Number,default:2},showType:{type:Number,default:2},isFooter:{type:Boolean,default:!1}},data:function(){return{windowHeight:f-50,showCateDrawer:!1,sysHeight:p,categoryList:[],navActive:0,categoryTitle:"",categoryErList:[],tabLeft:0,isWidth:0,tabClick:0,iSlong:!1,tempArr:[],loading:!1,loadend:!1,loadTitle:"加载更多",page:1,limit:10,cid:0,sid:0,tid:0,isAuto:!1,isShowAuth:!1,attr:{cartAttr:!1,productAttr:[],productSelect:{}},productValue:[],attrValue:"",storeName:"",id:0,cartData:{cartList:[],iScart:!1},totalPrice:0,lengthCart:0,is_vip:0,cart_num:0,storeInfo:{},scrollHeight:0,threeCateList:[],threeClick:0,topNavShow:!0,selectSku:{},skuArr:[]}},components:{productWindow:function(){i.e("components/productWindow/index").then(function(){return resolve(i("bae9"))}.bind(null,i)).catch(i.oe)},cartList:function(){i.e("components/cartList/index").then(function(){return resolve(i("ef91a"))}.bind(null,i)).catch(i.oe)},emptyPage:function(){i.e("components/emptyPage").then(function(){return resolve(i("398a"))}.bind(null,i)).catch(i.oe)},cusPreviewImg:function(){i.e("components/cusPreviewImg/index").then(function(){return resolve(i("9bf0"))}.bind(null,i)).catch(i.oe)}},mixins:[l.default],computed:d(d({},(0,o.mapState)({cartNum:function(t){return t.indexData.cartNum}})),(0,o.mapGetters)(["isLogin","uid","cartNum"])),watch:{},mounted:function(){var e=this;this.getAllCategory(),setTimeout((function(){e.getScrollHeight()}),500),this.isLogin&&this.getCartList(1),t.$on("newAttrNum",(function(t){t.length&&e.tempArr.forEach((function(e){t.forEach((function(t){e.id==t.id&&(e.cart_num=t.num)}))}))})),t.$on("newCartNum",(function(t){t.length&&e.tempArr.forEach((function(e){t.forEach((function(t){e.id==t.product_id&&(e.cart_num=0)}))}))}))},methods:{getScrollHeight:function(){var e=t.getWindowInfo().statusBarHeight;this.scrollHeight=f-138-e},getAllCategory:function(){var t=this,e=this;(0,s.getCategoryList)().then((function(i){if(i.data.length){var r=i.data;e.categoryTitle=r[0].cate_name,e.cid=r[0].id,e.sid=0,e.tid=0,e.navActive=0,e.tabClick=0,e.categoryList=r,e.categoryErList=i.data[0].children?i.data[0].children:[],e.threeCateList=i.data[0].children[0].children?i.data[0].children[0].children:[],t.threeCateList.length&&t.threeCateList.unshift({cate_name:"全部商品",id:0}),e.page=1,e.loadend=!1,e.tempArr=[],e.productslist()}}))},productslist:function(){var t=this,e=this;if(!e.loadend&&!e.loading){e.loading=!0,e.loadTitle="";var i=null;(3==this.showType&&2==this.level||1==this.showType&&3==this.level)&&(i=1),(0,s.getProductslist)({page:e.page,limit:e.limit,type:1,cid:e.cid,sid:e.sid,tid:e.tid,is_big:i}).then((function(i){i.data.map((function(e){t.$set(e,"copy_cart_num",e.cart_num)}));var r=i.data,a=r.length<e.limit;e.tempArr=e.$util.SplitArray(r,e.tempArr),e.$set(e,"tempArr",e.tempArr),e.loading=!1,e.loadend=a,e.loadTitle=a?"没有更多内容啦~":"加载更多",e.page=e.page+1})).catch((function(t){e.loading=!1,e.loadTitle="加载更多"}))}},tapNav:function(e,i){t.pageScrollTo({duration:0,scrollTop:0});var r=this.categoryList[e];this.navActive=e,this.categoryTitle=r.cate_name,this.categoryErList=i.children?i.children:[],this.threeCateList=[],this.categoryErList.length&&(this.threeCateList=i.children[0].children?i.children[0].children:[],this.threeCateList&&!this.haveAll(this.threeCateList)&&this.threeCateList.unshift({cate_name:"全部商品",id:0})),this.tabClick=0,this.tabLeft=0,this.cid=r.id,this.sid=0,this.tid=0,this.page=1,this.loadend=!1,this.tempArr=[],this.productslist()},longClick:function(t,e){this.tabClick=t,this.threeClick=0,this.sid=this.categoryErList[t].id,this.tid=0,this.threeCateList=e.children&&e.children.length?e.children:[],this.threeCateList&&this.threeCateList.length&&!this.haveAll(this.threeCateList)&&this.threeCateList.unshift({cate_name:"全部商品",id:0}),this.page=1,this.loadend=!1,this.tempArr=[],this.productslist()},threeCateClick:function(t,e){this.threeClick=t,this.tid=e.id,this.page=1,this.loadend=!1,this.tempArr=[],this.productslist()},deepClone:function(t){var e=Array.isArray(t)?[]:{};if(t&&"object"===(0,a.default)(t))for(var i in t)t.hasOwnProperty(i)&&(e[i]=t&&"object"===(0,a.default)(t[i])?this.deepClone(t[i]):t[i]);return e},haveAll:function(t){var e=this.deepClone(t),i=[];return e.forEach((function(t){i.push(t.id)})),!!i.includes(0)},subOrder:function(){var e=this.cartData.cartList,i=[];if(!e.length)return this.$util.Tips({title:"请选择产品"});e.forEach((function(t){t.attrStatus&&t.status&&i.push(t.id)})),t.navigateTo({url:"/pages/goods/order_confirm/index?cartId="+i.join(",")}),this.cartData.iScart=!1},getTotalPrice:function(){var t=this,e=t.cartData.cartList,i=0;e.forEach((function(e){e.attrStatus&&e.status&&(i=t.$util.$h.Add(i,t.$util.$h.Mul(e.cart_num,e.truePrice)))})),t.$set(t,"totalPrice",i)},getCartList:function(t){var e=this,i=this;(0,c.vcartList)().then((function(r){i.$set(i.cartData,"cartList",r.data),r.data.length?i.$set(i.cartData,"iScart",!t&&!i.cartData.iScart):i.$set(i.cartData,"iScart",!1),r.data.length||(e.$store.commit("indexData/setCartNum",0),e.tempArr.forEach((function(t){t.cart_num=0}))),i.getTotalPrice()}))},getCartNum:function(){var t=this;(0,c.getCartCounts)().then((function(e){t.$store.commit("indexData/setCartNum",e.data.count)}))},CartNumAdd:function(t,e){e.is_limit&&e.cart_num>=e.limit_num?this.$util.Tips({title:"购买最多不能超过"+e.limit_num}):this.ChangeCartNumDan(!0,t,e)},getAttrs:function(t){var e=this,i=this;(0,s.getAttr)(t,0).then((function(t){for(var r in i.$set(i.attr,"productAttr",t.data.productAttr),i.$set(i,"productValue",t.data.productValue),i.$set(i,"is_vip",t.data.storeInfo.is_vip),i.$set(i,"storeInfo",t.data.storeInfo),i.skuArr=[],t.data.productValue){var a=t.data.productValue[r];i.skuArr.push(a)}i.skuArr.length||(i.skuArr=[{image:e.storeInfo.image,suk:e.storeInfo.store_name,price:e.storeInfo.price}]),e.$set(e,"selectSku",i.skuArr[0]),i.DefaultSelect()}))},showImg:function(t){this.$refs.cusPreviewImg.open(this.selectSku.suk)},changeSwitch:function(t){var e=this,i=this.skuArr[t];this.$set(this,"selectSku",i);var r=i.suk.split(",");r.forEach((function(t,i){e.$set(e.attr.productAttr[i],"index",r[i])})),i&&(this.$set(this.attr.productSelect,"image",i.image),this.$set(this.attr.productSelect,"price",i.price),this.$set(this.attr.productSelect,"stock",i.stock),this.$set(this.attr.productSelect,"unique",i.unique),this.$set(this.attr.productSelect,"cart_num",1),this.$set(this.attr.productSelect,"vip_price",i.vip_price),this.$set(this,"attrValue",i.suk),this.$set(this,"attrTxt","已选择"))},goDetail:function(e){(0,u.goShopDetail)(e,this.uid).catch((function(i){t.navigateTo({url:"/pages/goods_details/index?id=".concat(e.id,"&fromType=1")})}))},closeCateDrawer:function(){this.showCateDrawer=!1},openCateDrawer:function(t){this.topNavShow=t,this.showCateDrawer=!0},lower:function(t){this.productslist()},scroll:function(e){t.$emit("scroll")},goSearch:function(){t.navigateTo({url:"/pages/goods/goods_search/index"})},toggleInput:function(t,e){e||this.$set(t,"showInput",!0)},inputClick:function(t,e){var i=t.detail.value,r=/[^\d]/g;this.$nextTick((function(){e.copy_cart_num=i.replace(r,"")}))},setProCartNum:function(t,e){var i=this;e.is_limit&&e.copy_cart_num>=e.limit_num?this.$util.Tips({title:"购买最多不能超过"+e.limit_num}):(0,c.changeCartNum)(e.product_id,e.copy_cart_num,2).then((function(t){i.$util.Tips({title:t.msg}),e.cart_num=e.copy_cart_num,e.showInput=!1,i.getCartNum(),i.getCartList(1)})).catch((function(t){return e.copy_cart_num=e.cart_num,i.$util.Tips({title:t})}))}}};e.default=g}).call(this,i("df3c")["default"])},"4b2a":function(t,e,i){"use strict";i.r(e);var r=i("47fd"),a=i.n(r);for(var n in r)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return r[t]}))}(n);e["default"]=a.a},a161:function(t,e,i){"use strict";i.r(e);var r=i("be1b"),a=i("4b2a");for(var n in a)["default"].indexOf(n)<0&&function(t){i.d(e,t,(function(){return a[t]}))}(n);i("34cb");var s=i("828b"),c=Object(s["a"])(a["default"],r["b"],r["c"],!1,null,"7e3e9e31",null,!1,r["a"],void 0);e["default"]=c.exports},be1b:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return r}));var r={easyLoadimage:function(){return i.e("components/easy-loadimage/easy-loadimage").then(i.bind(null,"94dd"))},uniBadge:function(){return i.e("uni_modules/uni-badge/components/uni-badge/uni-badge").then(i.bind(null,"4d28"))}},a=function(){var t=this,e=t.$createElement,i=(t._self._c,t.threeCateList.length&&3==t.level),r=i?t.threeCateList.length&&3==t.level:null,a=t.threeCateList.length&&3==t.level,n=t.threeCateList.length,s=!t.tempArr.length&&!t.loading,c=t.topNavShow?null:t.categoryList.length;t.$mp.data=Object.assign({},{$root:{g0:i,g1:r,g2:a,g3:n,g4:s,g5:c}})},n=[]},c59f:function(t,e,i){}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/goods_cate/template/template2-create-component',
    {
        'pages/goods_cate/template/template2-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('df3c')['createComponent'](__webpack_require__("a161"))
        })
    },
    [['pages/goods_cate/template/template2-create-component']]
]);
