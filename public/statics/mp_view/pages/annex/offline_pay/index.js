(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/annex/offline_pay/index"],{"15d9":function(e,t,n){"use strict";(function(e,t){var i=n("47a9");n("f076");i(n("3240"));var a=i(n("7454"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},"234d":function(e,t,n){"use strict";var i=n("d0fc"),a=n.n(i);a.a},"6f7e":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n("606e"),a=n("5088"),o=n("8f59"),s=(getApp(),{data:function(){return{money:"",payPrice:"",payType:"weixin",alipayHtml:"",alipay:!1,wxpay:!1,yuePay:!1,paying:!1,now_money:0,isWeixin:!1,site_name:"",isCommitted:!1,isShowAuth:!1}},watch:{money:function(e,t){e&&"number"===typeof e?this.checkPrice():this.payPrice=""}},computed:(0,o.mapGetters)(["isLogin"]),onLoad:function(e){},onShow:function(){this.isLogin?this.getPayType():(0,a.toLogin)()},methods:{getPayType:function(){var t=this;(0,i.orderOfflinePayType)().then((function(n){var i=n.data,a=i.ali_pay_status,o=i.pay_weixin_open,s=i.yue_pay_status,c=i.offline_pay_status,u=i.site_name,r=i.now_money;t.alipay="1"===a,t.wxpay=1===o,t.yuePay=1===s,t.now_money=r,t.site_name=u,c||e.showModal({title:"支付提醒",content:"线下支付已关闭，请点击确认按钮返回主页",showCancel:!1,success:function(){e.switchTab({url:"/pages/index/index"})}}),u&&e.setNavigationBarTitle({title:u})})).catch((function(t){e.showToast({title:t,icon:"none"})}))},checkForm:function(t){var n=t.detail.value,i=n.money,a=n.method;i?this.combData(a):e.showToast({title:"请输入支付金额",icon:"none"})},checkPrice:function(){var t=this;(0,i.offlineCheckPrice)({pay_price:this.money}).then((function(e){t.payPrice=e.data.pay_price})).catch((function(t){e.showToast({title:t,icon:"none"})}))},combData:function(t){var n=this,a={type:3,pay_type:t,from:"weixinh5",price:this.payPrice||this.money,money:this.money};a.from="routine",this.paying||(this.paying=!0,e.showLoading({title:"正在确认…"}),(0,i.offlineCreate)(a).then((function(t){e.hideLoading(),n.callPay(t)})).catch((function(t){n.paying=!1,e.showToast({title:t,icon:"none"})})))},callPay:function(t){var n=t.data,i=n.status,a=n.result,o=(a.orderId,a.jsConfig),s="/pages/annex/offline_result/index?site_name="+this.site_name;switch(i){case"ORDER_EXIST":case"EXTEND_ORDER":case"PAY_ERROR":this.paying=!1,this.$util.Tips({title:t.msg},{tab:5,url:s});break;case"SUCCESS":this.paying=!1,this.money="",this.$util.Tips({title:t.msg,icon:"success"},{tab:5,url:s});break;case"WECHAT_PAY":var c=this,u="";u=e.requestOrderPayment?"requestOrderPayment":"requestPayment",e[u]({timeStamp:o.timestamp,nonceStr:o.nonceStr,package:o.package,signType:o.signType,paySign:o.paySign,success:function(e){c.$util.Tips({title:"支付成功",icon:"success"},{tab:5,url:"/pages/annex/offline_result/index"})},fail:function(){e.showToast({title:"取消支付",icon:"none",success:function(){c.paying=!1}})},complete:function(){c.paying=!1,e.hideLoading()}});break;case"PAY_DEFICIENCY":this.paying=!1,this.$util.Tips({title:t.msg});break;case"WECHAT_H5_PAY":this.paying=!1,e.showToast({title:t.msg,success:function(){location.href=o.mweb_url}});break;case"ALIPAY_PAY":this.paying=!1,e.showToast({title:"微信小程序不支持支付宝支付"});break}}}});t.default=s}).call(this,n("df3c")["default"])},7454:function(e,t,n){"use strict";n.r(t);var i=n("ae6a"),a=n("a0d8");for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n("234d"),n("e763");var s=n("828b"),c=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"058b94aa",null,!1,i["a"],void 0);t["default"]=c.exports},a0d8:function(e,t,n){"use strict";n.r(t);var i=n("6f7e"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=a.a},ae6a:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){}));var i=function(){var e=this.$createElement;this._self._c},a=[]},c3be:function(e,t,n){},d0fc:function(e,t,n){},e763:function(e,t,n){"use strict";var i=n("c3be"),a=n.n(i);a.a}},[["15d9","common/runtime","common/vendor"]]]);