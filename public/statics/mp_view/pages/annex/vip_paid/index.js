(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/annex/vip_paid/index"],{"1f52":function(e,t,i){},"386b":function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,i=(e._self._c,!e.userInfo.is_ever_level&&e.userInfo.is_money_level?e._f("dateFormat")(e.userInfo.overdue_time):null),n=e.memberType.length&&!e.userInfo.is_ever_level,r=n?e.__map(e.memberType,(function(t,i){var n=e.__get_orig(t),r=e._f("moneyFormat")(t.pre_price),o=e._f("moneyFormat")(t.price),a=e.$util.$h.Sub(t.price,t.pre_price);return{$orig:n,f1:r,f2:o,g1:a}})):null,o=e.memberCoupons.length,a=o?e.__map(e.memberCoupons,(function(t,i){var n=e.__get_orig(t),r=1!=t.coupon_type?parseFloat(t.coupon_price):null,o="0.00"!=t.use_min_price?e._f("moneyFormat")(t.use_min_price):null;return{$orig:n,m0:r,f3:o}})):null,c=parseFloat(e.svip.price);e.$mp.data=Object.assign({},{$root:{f0:i,g0:n,l0:r,g2:o,l1:a,m1:c}})},r=[]},"6bba":function(e,t,i){"use strict";i.r(t);var n=i("84b1"),r=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(o);t["default"]=r.a},"84b1":function(e,t,i){"use strict";(function(e){var n=i("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(i("89cc")),o=i("8f59"),a=i("92f9"),c=(i("606e"),i("5088"),i("7391")),s=n(i("f89f")),m={components:{recommend:function(){Promise.all([i.e("common/vendor"),i.e("components/recommend/index")]).then(function(){return resolve(i("a60c"))}.bind(null,i)).catch(i.oe)},NavBar:function(){i.e("components/NavBar").then(function(){return resolve(i("a7d8"))}.bind(null,i)).catch(i.oe)}},mixins:[r.default],filters:{dateFormat:function(e){return(0,s.default)(1e3*e).format("YYYY-MM-DD")},moneyFormat:function(e){return parseFloat(e)}},data:function(){return{memberType:[],userInfo:{},memberRights:[],memberExplain:[],memberCoupons:[],isGetFree:null,account:"",password:"",goodsList:[],pay_order_id:"",totalPrice:"0",page:1,limit:15,finished:!1,memberEndTime:"",type:"",svip:{},agreementSelect:!1,isShowAuth:!1,iconColor:"#FFFFFF",isScrolling:!1}},provide:function(){return{isVip:!0}},computed:(0,o.mapGetters)(["isLogin"]),onLoad:function(){this.isLogin&&this.onLunch()},onReachBottom:function(){this.groomList()},onPageScroll:function(t){e.$emit("scroll"),t.scrollTop>50?(this.isScrolling=!0,this.iconColor="#333333"):t.scrollTop<50&&(this.isScrolling=!1,this.iconColor="#FFFFFF")},methods:{onLunch:function(){this.memberCard(),this.groomList()},selectAgree:function(){this.agreementSelect=!this.agreementSelect},privacy:function(t){e.navigateTo({url:"/pages/users/privacy/index?type="+t})},pay:function(){this.createMemberCard("weixin")},scrollToCard:function(){var t=e.createSelectorQuery().in(this);t.select("#card").boundingClientRect((function(t){e.pageScrollTo({scrollTop:t.top})})).exec()},goDetail:function(t){e.navigateTo({url:"/pages/goods_details/index?id=".concat(t)})},memberCard:function(){var t=this;e.showLoading({title:"正在加载…"}),(0,a.memberCard)().then((function(i){e.hideLoading();var n=i.data,r=n.is_get_free,o=n.member_coupons,c=n.member_explain,s=n.member_rights,m=n.member_type;t.isGetFree=r,t.userInfo=r.user_info,t.memberRights=s,t.memberType=m,t.memberCoupons=o,t.memberExplain=c,r.is_record&&(t.memberType=t.memberType.filter((function(e){return"free"!==e.type}))),t.totalPrice=parseFloat(t.memberType[0].pre_price),t.type=t.memberType[0].type,t.totalPrice=parseFloat(t.memberType[0].pre_price),t.svip=t.memberType[0],(0,a.memberOverdueTime)({member_type:t.svip.type,vip_day:t.svip.vip_day}).then((function(e){t.memberEndTime=e.data.data}))})).catch((function(t){e.showToast({title:t,icon:"none"})}))},groomList:function(){var t=this;this.finished||(e.showLoading({title:"加载中"}),(0,a.groomList)(5,{page:this.page,limit:this.limit}).then((function(i){e.hideLoading(),t.goodsList=t.goodsList.concat(i.data.list),t.finished=i.data.list.length<t.limit,t.page+=1})).catch((function(t){e.hideLoading()})))},checkType:function(e){this.type=e.type,this.svip=e,this.totalPrice=parseFloat(e.pre_price)},getMemberCard:function(){var e=this;(0,a.memberCard)().then((function(t){var i=t.data;e.memberType=i.member_type,e.memberRights=i.member_rights,e.isGetFree=i.is_get_free})).catch((function(e){}))},memberSelect:function(e){this.memberSelected=e},drawMemberCard:function(){e.navigateTo({url:"/pages/annex/vip_paid_active/index"})},createMemberCard:function(t){if(!this.agreementSelect)return this.$util.Tips({title:"请先阅读并同意协议"});e.showLoading({title:"正在加载…"});var i={pay_type:t||this.payMode[0].value,type:"1",from:"routine",member_type:this.svip.id,price:this.svip.pre_price,money:this.svip.price};(0,c.openPaySubscribe)().then((function(){(0,a.memberCardCreate)(i).then((function(t){e.hideLoading(),e.redirectTo({url:"/pages/goods/cashier/index?order_id=".concat(t.data.order_id,"&from_type=vip")})})).catch((function(t){e.showToast({title:t})}))}))},goRightDetail:function(){e.navigateTo({url:"/pages/annex/vip_paid_rights/index"})}}};t.default=m}).call(this,i("df3c")["default"])},"8b8e":function(e,t,i){"use strict";i.r(t);var n=i("386b"),r=i("6bba");for(var o in r)["default"].indexOf(o)<0&&function(e){i.d(t,e,(function(){return r[e]}))}(o);i("e9d3");var a=i("828b"),c=Object(a["a"])(r["default"],n["b"],n["c"],!1,null,"533cbb6a",null,!1,n["a"],void 0);t["default"]=c.exports},d7b7:function(e,t,i){"use strict";(function(e,t){var n=i("47a9");i("f076");n(i("3240"));var r=n(i("8b8e"));e.__webpack_require_UNI_MP_PLUGIN__=i,t(r.default)}).call(this,i("3223")["default"],i("df3c")["createPage"])},e9d3:function(e,t,i){"use strict";var n=i("1f52"),r=i.n(n);r.a}},[["d7b7","common/runtime","common/vendor"]]]);