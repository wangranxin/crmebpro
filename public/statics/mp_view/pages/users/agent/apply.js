require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/users/agent/apply"],{"0530":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){}));var n=function(){var t=this.$createElement,e=(this._self._c,this.__get_style([this.headerBg])),i=this.form.images.length;this.$mp.data=Object.assign({},{$root:{s0:e,g0:i}})},r=[]},"0703":function(t,e,i){"use strict";var n=i("3765"),r=i.n(n);r.a},"2d20":function(t,e,i){"use strict";i.r(e);var n=i("80ce"),r=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=r.a},3765:function(t,e,i){},"80ce":function(t,e,i){"use strict";(function(t){var n=i("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(i("7eb4")),o=n(i("ee10")),a=n(i("7ca3")),s=(i("5088"),i("8f59")),c=i("92f9"),u=n(i("89cc")),f=n(i("0293")),l=i("4d38");function h(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function d(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?h(Object(i),!0).forEach((function(e){(0,a.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var p=t.getWindowInfo().statusBarHeight,g={data:function(){return{sysHeight:p,form:{division_name:"",name:"",phone:"",code:"",division_invite:"",images:[]},canvasWidth:"",canvasHeight:"",canvasStatus:!1,isSelect:!1,keyCode:"",id:0,showModal:!1,supplierAgreement:"",tagStyle:{img:"width:100%;display:block;"}}},components:{Verify:function(){i.e("pages/users/components/verify/verify").then(function(){return resolve(i("2e78"))}.bind(null,i)).catch(i.oe)},tuiModal:function(){i.e("components/tui-modal/index").then(function(){return resolve(i("6b9f"))}.bind(null,i)).catch(i.oe)}},mixins:[f.default,u.default],watch:{isLogin:{handler:function(t,e){},deep:!0}},computed:d(d({},(0,s.mapGetters)(["isLogin"])),{},{isSelectStar:function(){if(this.form.division_name&&this.form.name&&this.form.phone&&this.form.code&&this.form.division_invite&&this.form.images.length)return!0},headerBg:function(){return{backgroundImage:"url("+l.HTTP_REQUEST_URL+"/statics/images/agent/apply_header.png)"}},mainHeight:function(){var e=t.getWindowInfo(),i=e.windowHeight;return i-90-this.sysHeight}}),onLoad:function(t){this.getInfo()},methods:{DelPic:function(t){this.form.images[t];this.form.images.splice(t,1),this.$set(this.form,"images",this.form.images)},uploadpic:function(){var t=this,e=this;this.canvasStatus=!0,e.$util.uploadImageChange({count:8,url:"upload/image"},(function(t){e.form.images.length<8&&e.form.images.push(t.data.url)}),(function(e){t.canvasStatus=!1}),(function(e){t.canvasWidth=e.w,t.canvasHeight=e.h}))},code:function(){return this.form.phone?/^1(3|4|5|7|8|9|6)\d{9}$/i.test(this.form.phone)?void this.$refs.verify.show():this.$util.Tips({title:"请输入正确的手机号码"}):this.$util.Tips({title:"请填写手机号码"})},success:function(t){var e=this;this.$refs.verify.hide(),(0,c.getCodeApi)().then((function(i){e.keyCode=i.data.key,e.getCode(t)})).catch((function(t){e.$util.Tips({title:t})}))},getCode:function(t){var e=this;return(0,o.default)(r.default.mark((function i(){var n;return r.default.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(n=e,e.form.phone){i.next=3;break}return i.abrupt("return",n.$util.Tips({title:"请填写手机号码"}));case 3:if(/^1(3|4|5|7|8|9|6)\d{9}$/i.test(e.form.phone)){i.next=5;break}return i.abrupt("return",e.$util.Tips({title:"请输入正确的手机号码"}));case 5:return i.next=7,(0,c.registerVerify)({phone:n.form.phone,type:"agent",key:n.keyCode,captchaType:"blockPuzzle",captchaVerification:t.captchaVerification}).then((function(t){n.$util.Tips({title:t.msg}),n.sendCode()})).catch((function(t){n.$util.Tips({title:t})}));case 7:case"end":return i.stop()}}),i)})))()},proviceSelect:function(){this.isSelect=!this.isSelect},getInfo:function(){var t=this;(0,c.userAgentInfo)().then((function(e){var i=e.data;t.id=i.id||0,t.form.division_name=i.division_name||"",t.form.name=i.name||"",t.form.phone=i.phone||"",t.form.division_invite=i.division_invite||"",t.form.images=i.images||[]})).catch((function(e){return t.$util.Tips({title:e})}))},submitSupply:function(){var e=this;return this.isSelectStar?this.isSelect?void(0,c.agentCreateApi)(this.id,this.form).then((function(e){t.navigateTo({url:"/pages/users/agent/state"})})).catch((function(t){return e.$util.Tips({title:t})})):this.$util.Tips({title:"请阅读并同意协议"}):this.$util.Tips({title:"请完整填写表单信息"})},pageBack:function(){t.reLaunch({url:"/pages/user/index"})},goRecord:function(){t.navigateTo({url:"/pages/users/agent/record"})},getAgreement:function(){var t=this;(0,c.getUserAgreement)("agent").then((function(e){t.supplierAgreement=e.data.content,t.showModal=!0})).catch((function(t){that.$util.Tips({title:t.msg})}))},hideModal:function(){this.showModal=!1}}};e.default=g}).call(this,i("df3c")["default"])},c306:function(t,e,i){"use strict";i.r(e);var n=i("0530"),r=i("2d20");for(var o in r)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return r[t]}))}(o);i("0703");var a=i("828b"),s=Object(a["a"])(r["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);e["default"]=s.exports},f608:function(t,e,i){"use strict";(function(t,e){var n=i("47a9");i("f076");n(i("3240"));var r=n(i("c306"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(r.default)}).call(this,i("3223")["default"],i("df3c")["createPage"])}},[["f608","common/runtime","common/vendor","pages/users/common/vendor"]]]);