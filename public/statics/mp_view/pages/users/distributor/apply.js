require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/users/distributor/apply"],{"26f9":function(e,t,n){"use strict";(function(e,t){var i=n("47a9");n("f076");i(n("3240"));var r=i(n("eca5"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(r.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},"28ea":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){}));var i=function(){var e=this.$createElement;this._self._c},r=[]},6471:function(e,t,n){},be99:function(e,t,n){"use strict";(function(e){var i=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("7eb4")),o=i(n("ee10")),a=i(n("7ca3")),c=(n("5088"),n("8f59")),u=n("92f9"),s=i(n("89cc")),f=i(n("0293")),l=n("4d38");function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=e.getWindowInfo().statusBarHeight,m={data:function(){return{sysHeight:h,form:{nickname:"",uid:"",phone:"",code:"",real_name:""},canvasWidth:"",canvasHeight:"",canvasStatus:!1,isSelect:!1,keyCode:"",id:0,showModal:!1,supplierAgreement:"",tagStyle:{img:"width:100%;display:block;"}}},components:{Verify:function(){n.e("pages/users/components/verify/verify").then(function(){return resolve(n("2e78"))}.bind(null,n)).catch(n.oe)},tuiModal:function(){n.e("components/tui-modal/index").then(function(){return resolve(n("6b9f"))}.bind(null,n)).catch(n.oe)}},mixins:[f.default,s.default],watch:{isLogin:{handler:function(e,t){},deep:!0}},computed:p(p({},(0,c.mapGetters)(["isLogin"])),{},{isSelectStar:function(){if(this.form.nickname&&this.form.uid&&this.form.phone&&this.form.code&&this.form.real_name)return!0},headerBg:function(){return l.HTTP_REQUEST_URL+"/statics/images/promoter_apply.png"},mainHeight:function(){var t=e.getWindowInfo(),n=t.windowHeight;return n-90-this.sysHeight}}),onLoad:function(e){this.getInfo()},methods:{code:function(){return this.form.phone?/^1(3|4|5|7|8|9|6)\d{9}$/i.test(this.form.phone)?void this.$refs.verify.show():this.$util.Tips({title:"请输入正确的手机号码"}):this.$util.Tips({title:"请填写手机号码"})},success:function(e){var t=this;this.$refs.verify.hide(),(0,u.getCodeApi)().then((function(n){t.keyCode=n.data.key,t.getCode(e)})).catch((function(e){t.$util.Tips({title:e})}))},getCode:function(e){var t=this;return(0,o.default)(r.default.mark((function n(){var i;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=t,t.form.phone){n.next=3;break}return n.abrupt("return",i.$util.Tips({title:"请填写手机号码"}));case 3:if(/^1(3|4|5|7|8|9|6)\d{9}$/i.test(t.form.phone)){n.next=5;break}return n.abrupt("return",t.$util.Tips({title:"请输入正确的手机号码"}));case 5:return n.next=7,(0,u.registerVerify)({phone:i.form.phone,type:"agent",key:i.keyCode,captchaType:"blockPuzzle",captchaVerification:e.captchaVerification}).then((function(e){i.$util.Tips({title:e.msg}),i.sendCode()})).catch((function(e){i.$util.Tips({title:e})}));case 7:case"end":return n.stop()}}),n)})))()},proviceSelect:function(){this.isSelect=!this.isSelect},getInfo:function(){var e=this;(0,u.userPromoterInfo)().then((function(t){var n=t.data.user;e.id=n.id||0,e.form.nickname=n.nickname||"",e.form.uid=n.uid||"",e.form.phone=n.phone||"",e.form.real_name=n.real_name||"",e.supplierAgreement=t.data.agreement.content})).catch((function(t){return e.$util.Tips({title:t})}))},submitSupply:function(){var t=this;return this.isSelectStar?this.isSelect?void(0,u.promoterCreateApi)(this.id,this.form).then((function(t){e.navigateTo({url:"/pages/users/agent/state?type=promoter&id="+t.data.id})})).catch((function(e){return t.$util.Tips({title:e})})):this.$util.Tips({title:"请阅读并同意协议"}):this.$util.Tips({title:"请完整填写表单信息"})},pageBack:function(){e.reLaunch({url:"/pages/user/index"})},goRecord:function(){e.navigateTo({url:"/pages/users/agent/record"})},getAgreement:function(){this.showModal=!0},hideModal:function(){this.showModal=!1}}};t.default=m}).call(this,n("df3c")["default"])},c78d:function(e,t,n){"use strict";n.r(t);var i=n("be99"),r=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(o);t["default"]=r.a},eca5:function(e,t,n){"use strict";n.r(t);var i=n("28ea"),r=n("c78d");for(var o in r)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(o);n("fd56");var a=n("828b"),c=Object(a["a"])(r["default"],i["b"],i["c"],!1,null,"459ae3c6",null,!1,i["a"],void 0);t["default"]=c.exports},fd56:function(e,t,n){"use strict";var i=n("6471"),r=n.n(i);r.a}},[["26f9","common/runtime","common/vendor","pages/users/common/vendor"]]]);