require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/users/message_center/index"],{"0985":function(t,e,n){"use strict";n.r(e);var i=n("245a"),s=n("c229");for(var a in s)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return s[t]}))}(a);n("ad5f");var o=n("828b"),c=Object(o["a"])(s["default"],i["b"],i["c"],!1,null,"4f3707a5",null,!1,i["a"],void 0);e["default"]=c.exports},"245a":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,n=(t._self._c,t.community.id?t._f("typeFilter")(t.community.type):null),i=t.__map(t.list,(function(e,n){var i=t.__get_orig(e),s=[1,2].includes(e.message_type),a=s?null:t._f("messageType")(e.message_type);return{$orig:i,g0:s,f1:a}}));t.$mp.data=Object.assign({},{$root:{f0:n,l0:i}})},s=[]},4248:function(t,e,n){"use strict";(function(t){var i=n("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n("92f9"),a=(i(n("89cc")),n("4d38")),o={data:function(){return{list:[],system:{},community:{},page:1,type:0,limit:20,loading:!1,finished:!1,imgHost:a.HTTP_REQUEST_URL}},components:{tuiSwipeAction:function(){n.e("components/tui-swipe-action/index").then(function(){return resolve(n("337d"))}.bind(null,n)).catch(n.oe)}},filters:{messageType:function(t){return{3:"[图片]",4:"[语音]",5:"[商品]",6:"[订单]"}[t]},typeFilter:function(t){return{1:"点赞",2:"评论",3:"关注"}[t]}},onShow:function(){this.page=1,this.list=[],this.finished=!1,this.getList()},onReachBottom:function(){this.getList()},onPullDownRefresh:function(){this.page=1,this.list=[],this.finished=!1,this.getList()},methods:{getList:function(){var e=this;this.loading||this.finished||(this.loading=!0,t.showLoading({title:"加载中"}),(0,s.serviceRecord)({page:this.page,limit:this.limit}).then((function(n){t.hideLoading(),t.stopPullDownRefresh();var i=n.data.service;e.system=n.data.system,e.community=n.data.community,e.loading=!1,i.forEach((function(t){[1,2].includes(t.message_type)&&(t.message=e.replace_em(t.message))})),e.list=e.list.concat(i),e.finished=i.length<e.limit,e.page+=1})).catch((function(e){t.showToast({title:e.msg,icon:"none"})})))},replace_em:function(t){return t=t.replace(/\[em-([a-z_]*)\]/g,"<span class='em em-$1'/></span>"),t},goChat:function(e){t.navigateTo({url:"/pages/extension/customer_list/chat?to_uid="+e+"&type=1"})},goDetail:function(e){0==e?t.navigateTo({url:"/pages/users/message_center/messageDetail"}):t.navigateTo({url:"/pages/discover/discoverMessage/index"})},deleteMsg:function(t){this.list.splice(t,1)}}};e.default=o}).call(this,n("df3c")["default"])},7249:function(t,e,n){},a02b:function(t,e,n){"use strict";(function(t,e){var i=n("47a9");n("f076");i(n("3240"));var s=i(n("0985"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(s.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},ad5f:function(t,e,n){"use strict";var i=n("7249"),s=n.n(i);s.a},c229:function(t,e,n){"use strict";n.r(e);var i=n("4248"),s=n.n(i);for(var a in i)["default"].indexOf(a)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(a);e["default"]=s.a}},[["a02b","common/runtime","common/vendor"]]]);