(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/behalf/common/vendor"],{"962b":function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=e("6af6"),r={data:function(){return{attr:{cartAttr:!1,productAttr:[],productSelect:{}},productValue:[]}},created:function(){},methods:{DefaultSelect:function(){var t=this.attr.productAttr,i=[],e=[];for(var s in this.productValue)if(this.productValue[s].stock>0){i=this.attr.productAttr.length?s.split(","):[];break}e=!i.length&&this.attr.productAttr.length?Object.keys(this.productValue)[0].split(","):i;for(var r=0;r<t.length;r++)this.$set(t[r],"index",e[r]);var c=this.productValue[e.join(",")];this.$set(this.attr.productSelect,"store_name",this.storeInfo.store_name),c&&t.length?(this.$set(this.attr.productSelect,"image",c.image),this.$set(this.attr.productSelect,"price",c.price),this.$set(this.attr.productSelect,"stock",c.stock),this.$set(this.attr.productSelect,"unique",c.unique),this.$set(this.attr.productSelect,"cart_num",1),this.$set(this,"attrValue",e.join(",")),this.$set(this.attr.productSelect,"vip_price",c.vip_price),this.$set(this,"attrTxt","已选择")):!c&&t.length?(this.$set(this.attr.productSelect,"image",this.storeInfo.image),this.$set(this.attr.productSelect,"price",this.storeInfo.price),this.$set(this.attr.productSelect,"stock",0),this.$set(this.attr.productSelect,"unique",""),this.$set(this.attr.productSelect,"cart_num",0),this.$set(this.attr.productSelect,"vip_price",this.storeInfo.vip_price),this.$set(this,"attrValue",""),this.$set(this,"attrTxt","请选择")):c||t.length||(this.$set(this.attr.productSelect,"image",this.storeInfo.image),this.$set(this.attr.productSelect,"price",this.storeInfo.price),this.$set(this.attr.productSelect,"stock",this.storeInfo.stock),this.$set(this.attr.productSelect,"unique",this.storeInfo.unique||""),this.$set(this.attr.productSelect,"cart_num",1),this.$set(this.attr.productSelect,"vip_price",this.storeInfo.vip_price),this.$set(this,"attrValue",""),this.$set(this,"attrTxt","请选择"))},ChangeAttr:function(t){var i=this.productValue[t];this.$set(this,"selectSku",i),i&&i.stock>=0?(this.$set(this.attr.productSelect,"image",i.image),this.$set(this.attr.productSelect,"price",i.price),this.$set(this.attr.productSelect,"stock",i.stock),this.$set(this.attr.productSelect,"unique",i.unique),this.$set(this.attr.productSelect,"cart_num",1),this.$set(this.attr.productSelect,"vip_price",i.vip_price),this.$set(this,"attrValue",t),this.$set(this,"attrTxt","已选择")):(this.$set(this.attr.productSelect,"image",this.storeInfo.image),this.$set(this.attr.productSelect,"price",this.storeInfo.price),this.$set(this.attr.productSelect,"stock",0),this.$set(this.attr.productSelect,"unique",""),this.$set(this.attr.productSelect,"cart_num",0),this.$set(this.attr.productSelect,"vip_price",this.storeInfo.vip_price),this.$set(this,"attrValue",""),this.$set(this,"attrTxt","请选择"))},attrVal:function(t){this.$set(this.attr.productAttr[t.indexw],"index",this.attr.productAttr[t.indexw].attr_values[t.indexn])},iptCartNum:function(t){this.$set(this.attr.productSelect,"cart_num",t)},onMyEvent:function(){this.$set(this.attr,"cartAttr",!1)},ChangeCartNumDuo:function(t){if(t){if(this.attr.productSelect.cart_num==this.attr.productSelect.stock)return this.$util.Tips({title:"该产品没有更多库存了"});this.attr.productSelect.cart_num++}else{if(1==this.attr.productSelect.cart_num)return;this.attr.productSelect.cart_num--}},goCatNum:function(t){this.goCartChange(!0,null,t)},goCartChange:function(i,e,r){var c=this,a={productId:i?this.id:e,cartNum:i?this.attr.productSelect.cart_num:1,uniqueId:i?this.attr.productSelect.unique:"",new:r,tourist_uid:this.touristId};(0,s.adminCartAdd)(this.userId,a).then((function(e){i&&(c.attr.cartAttr=!1),r&&t.navigateTo({url:"/pages/behalf/order_confirm/index?cartId=".concat(e.data.cartId,"&uid=").concat(c.userId,"&news=1")}),c.$util.Tips({title:"加入购物车成功"}),c.getCartList(1)})).catch((function(t){return c.$util.Tips({title:t})}))},goCartDuo:function(t){this.isLogin?(this.storeName=t.store_name,this.getAttrs(t.id),this.$set(this,"id",t.id),this.$set(this.attr,"cartAttr",!0)):toLogin()},goCartDan:function(t){this.isLogin?this.goCartChange(!1,t.id,1==t.cart_button?0:1):this.getIsLogin()},closeList:function(t){this.$set(this.cartData,"iScart",t)},selectitem:function(t){this.cartData.cartList[t].select=!this.cartData.cartList[t].select;var i=this.cartData.cartList.filter((function(t){return 1==t.select}));i.length==this.cartData.cartList.length?this.$refs.cartPopup.allSelect=!0:this.$refs.cartPopup.allSelect=!1},selectAll:function(t){var i=this;this.cartData.cartList.map((function(e){i.$set(e,"select",!t)}))},cartDelChange:function(){var t=this,i=[];if(this.cartData.cartList.forEach((function(t){t.select&&i.push(t.id)})),!i.length)return this.$util.Tips({title:"请先选择商品"});(0,s.adminCartDel)(this.userId,{ids:i.toString(),tourist_uid:this.touristId}).then((function(i){t.getCartList(0),t.$util.Tips({title:err})})).catch((function(i){return t.$util.Tips({title:i})}))},cartNumChange:function(t){var i=this;if(t.type){if(t.item.cart_num==t.item.productInfo.attrInfo.stock)return this.$util.Tips({title:"该产品没有更多库存了"})}else if(1==t.item.cart_num)return;(0,s.adminCartNum)(this.userId,{id:t.item.id,number:t.type?t.item.cart_num+1:t.item.cart_num-1,tourist_uid:this.touristId}).then((function(e){t.type?i.cartData.cartList[t.index].cart_num++:i.cartData.cartList[t.index].cart_num--,i.getTotalPrice(),i.$util.Tips({title:e.msg})})).catch((function(t){return i.$util.Tips({title:t})}))}}};i.default=r}).call(this,e("df3c")["default"])}}]);