(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/discover/discoverCreate/topic"],{"0f48":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return c})),i.d(e,"a",(function(){}));var n=function(){var t=this.$createElement,e=(this._self._c,this.__get_style([this.filterStyle]));this.$mp.data=Object.assign({},{$root:{s0:e}})},c=[]},"12f4":function(t,e,i){},6771:function(t,e,i){"use strict";var n=i("12f4"),c=i.n(n);c.a},"6d3c":function(t,e,i){"use strict";i.r(e);var n=i("0f48"),c=i("d64e");for(var o in c)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return c[t]}))}(o);i("6771"),i("fa9b");var a=i("828b"),r=Object(a["a"])(c["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);e["default"]=r.exports},7402:function(t,e,i){"use strict";(function(t,e){var n=i("47a9");i("f076");n(i("3240"));var c=n(i("6d3c"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(c.default)}).call(this,i("3223")["default"],i("df3c")["createPage"])},ba6d:function(t,e,i){"use strict";(function(t){var n=i("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=n(i("af34")),o=i("eb8a"),a=n(i("89cc")),r=i("2c18"),s=t.getWindowInfo().statusBarHeight,u={name:"createTopic",data:function(){return{sysHeight:s,id:0,topicSelectedList:[],topicKeyword:"",showFilter:!1,filterTopicList:[],focus:!0,recommendParams:{page:1,limit:10,is_recommend:1},showMore:!1,recommendTopic:[],boxHeight:0}},mixins:[a.default],computed:{filterStyle:function(){var e=t.getWindowInfo().windowHeight;return{height:e-this.boxHeight+"px",top:this.boxHeight+"px"}}},onLoad:function(t){t.data&&(this.topicSelectedList=JSON.parse(t.data)),this.getTopic()},methods:{getHeight:function(){var e=this;t.createSelectorQuery().select(".topic-box").boundingClientRect((function(t){e.boxHeight=t.height})).exec()},handleInput:(0,r.Debounce)((function(t){var e=this;this.topicKeyword?(0,o.getTopicApi)({is_community:1,name:this.topicKeyword}).then((function(t){e.getHeight(),e.filterTopicList=t.data,e.filterTopicList.unshift({name:e.topicKeyword}),e.showFilter=!0})):this.showFilter=!1})),getTopic:function(){var t=this;(0,o.getTopicApi)(this.recommendParams).then((function(e){t.showMore=e.data.length>=t.recommendParams.limit,t.recommendTopic=t.recommendTopic.concat(e.data),t.recommendParams.page++;var i=[];t.recommendTopic.forEach((function(e,n){t.topicSelectedList.forEach((function(t){t.name.includes(e.name)&&i.push(n)}))})),i=(0,c.default)(new Set(i)).sort((function(t,e){return e-t})),i.forEach((function(e){t.recommendTopic.splice(e,1)}))}))},changeTopic:function(t){var e=this;if(this.showFilter=!1,this.topicKeyword="",this.topicSelectedList.length>4)return this.$util.Tips({title:"最多可选择5个话题"});this.focus=!1;var i=this.topicSelectedList.map((function(t){return t.name}));i.includes(t.name)||this.topicSelectedList.push(t),this.recommendTopic.splice(this.recommendTopic.findIndex((function(e){return e.id==t.id})),1),this.$nextTick((function(){e.focus=!0}))},confirmCreate:function(){this.topicKeyword&&this.changeTopic({name:this.topicKeyword})},saveTopic:function(){t.$emit("topicSave",this.topicSelectedList),t.navigateBack()},delTopic:function(t){this.topicSelectedList.splice(t,1)}}};e.default=u}).call(this,i("df3c")["default"])},c6ea:function(t,e,i){},d64e:function(t,e,i){"use strict";i.r(e);var n=i("ba6d"),c=i.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=c.a},fa9b:function(t,e,i){"use strict";var n=i("c6ea"),c=i.n(n);c.a}},[["7402","common/runtime","common/vendor"]]]);