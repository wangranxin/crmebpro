(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/discover/discoverDetails/index"],{2762:function(t,i,e){},"38dc":function(t,i,e){"use strict";e.r(i);var n=e("5670"),o=e.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){e.d(i,t,(function(){return n[t]}))}(a);i["default"]=o.a},5670:function(t,i,e){"use strict";(function(t){var n=e("47a9");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=n(e("7ca3")),a=e("4d38"),s=n(e("89cc")),c=e("eb8a"),u=e("8f59");e("5088");function r(t,i){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);i&&(n=n.filter((function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),e.push.apply(e,n)}return e}var l=getApp(),h={data:function(){var t;return t={sysHeight:l.globalData.sysHeight,infoData:{userInfo:{avatar:"",nickname:""},author_image:"",author:"",title:"",content:"",content_type:1,slider_image:[],productList:[],topicList:[],video_url:"",comment_num:0},imageH:0,videoHeight:0,community_id:"",comment_reply_id:"",replyIndex:"",showBubble:!1,showInput:!1,comment:"",replyList:[],modalTitle:"",showModal:!1,modalType:0,placeholder:"说说你的看法吧～",commentNum:0,configData:{},focus:!1},(0,o.default)(t,"configData",{community_status:1,community_comment_add:1,community_comment_status:1}),(0,o.default)(t,"isAuto",!0),t},components:{emptyPage:function(){e.e("components/emptyPage").then(function(){return resolve(e("398a"))}.bind(null,e)).catch(e.oe)},tuiModal:function(){e.e("components/tui-modal/index").then(function(){return resolve(e("6b9f"))}.bind(null,e)).catch(e.oe)}},mixins:[s.default],computed:function(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{};i%2?r(Object(e),!0).forEach((function(i){(0,o.default)(t,i,e[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):r(Object(e)).forEach((function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}))}return t}({},(0,u.mapGetters)(["isLogin","uid"])),onLoad:function(t){if(!t.id)return this.$util.Tips({title:"缺少参数无法查看内容"},{tab:3});this.community_id=t.id,this.getConfig(),this.getInfo(),this.getReply(),this.isLogin&&(0,c.communityBrowseApi)(t.id).catch((function(t){}))},onShow:function(){this.showBubble=!1},onPageScroll:function(){this.showBubble=!1,t.$emit("scroll")},methods:{getConfig:function(){var t=this;(0,c.getCommunityConfig)().then((function(i){t.configData=i.data}))},proview:function(i){t.previewImage({urls:this.infoData.slider_image,current:i})},computedHeight:function(){var i=this;if(this.infoData.slider_image.length){var e=t.getWindowInfo().windowWidth;t.getImageInfo({src:this.setDomain(this.infoData.slider_image[0]),success:function(t){var n=parseInt(t.height*e/t.width);n>500?(i.isAuto=!1,i.imageH=500):i.imageH=n}})}},openShare:function(){},delContent:function(){this.modalTitle="确认删除该内容",this.modalType=1,this.showModal=!0,this.showBubble=!1},delReply:function(t,i){this.modalTitle="确认删除该评论",this.commentNum=i,this.modalType=2,this.comment_reply_id=t,this.showModal=!0},authTo:function(i){t.navigateTo({url:i})},getInfo:function(){var t=this;(0,c.communityInfoApi)(this.community_id).then((function(i){t.infoData=i.data,i.data.slider_image.length&&t.computedHeight()})).catch((function(i){return t.$util.Tips({title:i})}))},setDomain:function(t){return t=t?t.toString():"",t.indexOf("https://")>-1?t:t.replace("http://","https://")},onVideoLoad:function(t){this.videoHeight="".concat(t.detail.height/t.detail.width*710,"rpx")},getReply:function(){var t=this,i={community_id:this.community_id,reply_id:""};(0,c.communityReplyListApi)(i).then((function(i){i.data.list.length&&(i.data.list.map((function(i){t.$set(i,"show",!1)})),t.replyList=i.data.list)})).catch((function(i){return t.$util.Tips({title:i})}))},sendText:function(){var t=this;if(""==this.comment)return this.$util.Tips({title:"请输入评论内容"});var i={community_id:this.community_id,comment_reply_id:this.comment_reply_id,content:this.comment};(0,c.communityReplySaveApi)(i).then((function(i){return t.comment_reply_id="",t.infoData.comment_num++,t.showInput=!1,t.focus=!1,t.comment="",t.placeholder="说说你的看法吧～",t.getReply(),t.$util.Tips({title:i.msg})})).catch((function(i){return t.$util.Tips({title:i})}))},showReply:function(t,i,e){if(0==e)return this.$util.Tips({title:"该评论已被屏蔽，禁止回复"});this.comment_reply_id=t,this.placeholder="回复：".concat(i),this.showInput=!0},replyLike:function(t){var i=t.id,e=1==t.isLike?0:1,n=this;(0,c.communityReplyLikeApi)(i,{status:e}).then((function(i){return t.isLike=e,1==e?t.like_num++:t.like_num--,n.$util.Tips({title:i.msg})})).catch((function(t){return n.$util.Tips({title:t})}))},showMore:function(t,i,e){var n=this;if(this.replyIndex=i,e){var o={community_id:this.community_id,reply_id:t.id};(0,c.communityReplyListApi)(o).then((function(e){n.$set(n.replyList[i],"children",e.data.list),n.$set(t,"show",!0)})).catch((function(t){return n.$util.Tips({title:t})}))}else this.$set(t,"show",!1)},followChange:function(){var t=this;0==this.infoData.is_follow?(0,c.communitySetInsterestApi)(this.infoData.relation_id,{status:1}).then((function(i){return t.infoData.is_follow=1,t.$util.Tips({title:i.msg})})).catch((function(i){return t.$util.Tips({title:i})})):(this.modalTitle="确认取消关注",this.modalType=0,this.showModal=!0)},handleClick:function(t){var i=this,e=t.index;1==e?0==this.modalType?(0,c.communitySetInsterestApi)(this.infoData.relation_id,{status:0}).then((function(t){return i.infoData.is_follow=0,i.showModal=!1,i.$util.Tips({title:t.msg})})).catch((function(t){return i.showModal=!1,i.$util.Tips({title:t})})):1==this.modalType?(0,c.communityDeleteApi)(this.community_id).then((function(t){return i.showModal=!1,i.$util.Tips({title:t.msg},{tab:4,url:"/pages/discoverIndex/index"})})).catch((function(t){return i.showModal=!1,i.$util.Tips({title:t})})):2==this.modalType&&(0,c.communityReplyDeleteApi)(this.comment_reply_id).then((function(t){i.showModal=!1,i.replyList=[],i.reply_id="",i.comment_reply_id="",i.infoData.comment_num=i.infoData.comment_num-(1+i.commentNum),i.getReply()})).catch((function(t){return i.showModal=!1,i.$util.Tips({title:t})})):this.showModal=!1},contentLike:function(){var t=this,i=1==this.infoData.is_like?0:1;(0,c.communityLikeApi)(this.infoData.id,{status:i}).then((function(e){t.infoData.is_like=i,1==i?t.infoData.like_num++:t.infoData.like_num--})).catch((function(i){return t.$util.Tips({title:i})}))},openInput:function(){this.showInput=!0,this.focus=!0},ShareInfo:function(){if(this.$wechat.isWeixin()){var t={desc:this.infoData.content,title:this.infoData.title,link:"".concat(a.HTTP_REQUEST_URL,"/pages/discover/discoverDetails/index?id=").concat(this.community_id,"&spid=").concat(this.uid),imgUrl:this.infoData.image};this.$wechat.wechatEvevt(["updateAppMessageShareData","updateTimelineShareData","onMenuShareAppMessage","onMenuShareTimeline"],t).then((function(t){})).catch((function(t){}))}}},onShareAppMessage:function(){return(0,c.communityShareApi)(this.community_id).catch((function(t){})),{title:this.infoData.title||this.infoData.content,imageUrl:this.infoData.slider_image[0],path:"/pages/discover/discoverDetails/index?id="+this.community_id+"&spid="+this.uid}},onShareTimeline:function(){return(0,c.communityShareApi)(this.community_id).catch((function(t){})),{title:this.infoData.title||this.infoData.content,imageUrl:this.infoData.slider_image[0],path:"/pages/discover/discoverDetails/index?id="+this.community_id+"&spid="+this.uid}}};i.default=h}).call(this,e("df3c")["default"])},9685:function(t,i,e){"use strict";e.r(i);var n=e("9fec"),o=e("38dc");for(var a in o)["default"].indexOf(a)<0&&function(t){e.d(i,t,(function(){return o[t]}))}(a);e("bf6a"),e("e539");var s=e("828b"),c=Object(s["a"])(o["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],void 0);i["default"]=c.exports},"9fec":function(t,i,e){"use strict";e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){}));var n=function(){var t=this,i=t.$createElement,e=(t._self._c,[0,-1,-2].includes(t.infoData.is_verify)),n=t.infoData.slider_image.length,o=t.infoData.product&&t.infoData.product.length>1,a=o?null:t.infoData.product&&1==t.infoData.product.length,s=t.configData.community_comment_status?t.replyList.length:null;t._isMounted||(t.e0=function(){t.showBubble=!t.showBubble},t.e1=function(){t.showBubble=!1},t.e2=function(){t.showInput=!1}),t.$mp.data=Object.assign({},{$root:{g0:e,g1:n,g2:o,g3:a,g4:s}})},o=[]},bf6a:function(t,i,e){"use strict";var n=e("f3f3"),o=e.n(n);o.a},e539:function(t,i,e){"use strict";var n=e("2762"),o=e.n(n);o.a},f2e1:function(t,i,e){"use strict";(function(t,i){var n=e("47a9");e("f076");n(e("3240"));var o=n(e("9685"));t.__webpack_require_UNI_MP_PLUGIN__=e,i(o.default)}).call(this,e("3223")["default"],e("df3c")["createPage"])},f3f3:function(t,i,e){}},[["f2e1","common/runtime","common/vendor"]]]);