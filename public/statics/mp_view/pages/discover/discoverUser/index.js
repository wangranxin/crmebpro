(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/discover/discoverUser/index"],{5161:function(t,i,n){"use strict";(function(t,i){var e=n("47a9");n("f076");e(n("3240"));var o=e(n("a701"));t.__webpack_require_UNI_MP_PLUGIN__=n,i(o.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},"7acb":function(t,i,n){"use strict";n.r(i);var e=n("e291"),o=n.n(e);for(var s in e)["default"].indexOf(s)<0&&function(t){n.d(i,t,(function(){return e[t]}))}(s);i["default"]=o.a},a03f:function(t,i,n){"use strict";var e=n("b408"),o=n.n(e);o.a},a701:function(t,i,n){"use strict";n.r(i);var e=n("d71e"),o=n("7acb");for(var s in o)["default"].indexOf(s)<0&&function(t){n.d(i,t,(function(){return o[t]}))}(s);n("a03f");var a=n("828b"),c=Object(a["a"])(o["default"],e["b"],e["c"],!1,null,null,null,!1,e["a"],void 0);i["default"]=c.exports},b408:function(t,i,n){},d71e:function(t,i,n){"use strict";n.d(i,"b",(function(){return e})),n.d(i,"c",(function(){return o})),n.d(i,"a",(function(){}));var e=function(){var t=this.$createElement,i=(this._self._c,this.__get_style([this.headerStyle])),n=this.__get_style([this.cardStyle]),e=this.contentList.length,o=this.contentList.length;this.$mp.data=Object.assign({},{$root:{s0:i,s1:n,g0:e,g1:o}})},o=[]},e291:function(t,i,n){"use strict";(function(t){var e=n("47a9");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var o=e(n("89cc")),s=n("eb8a"),a=n("92f9"),c=t.getWindowInfo().statusBarHeight,u={data:function(){return{sysHeight:c,pageScrollStatus:!1,id:0,params:{page:1,limit:20,topic_id:"",keyword:"",is_interest:0,relation_id:""},infoList:[{name:"关注",count:"0"},{name:"好友",count:"0"},{name:"粉丝",count:"0"},{name:"获赞",count:"0"}],active:0,contentList:[],userInfo:{},showSearch:!1,showModal:!1,showFollow:!1,focus:!1,is_view:1}},mixins:[o.default],components:{emptyPage:function(){n.e("components/emptyPage").then(function(){return resolve(n("398a"))}.bind(null,n)).catch(n.oe)},NavBar:function(){n.e("components/NavBar").then(function(){return resolve(n("a7d8"))}.bind(null,n)).catch(n.oe)},waterfallsFlow:function(){n.e("components/discoverWaterfall/WaterfallsFlow").then(function(){return resolve(n("831d"))}.bind(null,n)).catch(n.oe)},tuiModal:function(){n.e("components/tui-modal/index").then(function(){return resolve(n("6b9f"))}.bind(null,n)).catch(n.oe)}},computed:{headerStyle:function(){return{"background-image":"url(".concat(this.userInfo.author_image,")")}},cardStyle:function(){return{"padding-top":40+this.sysHeight+"px"}}},provide:function(){return{flowLike:this.flowLike}},onPageScroll:function(i){i.scrollTop>130?this.pageScrollStatus=!0:i.scrollTop<130&&(this.pageScrollStatus=!1),t.$emit("scroll")},onReachBottom:function(){this.getList()},onLoad:function(t){this.id=t.id,this.getList()},onShow:function(){this.getUserInfo()},methods:{openFocus:function(){this.focus=!0},changeTab:function(t){this.active!=t&&(this.active=t,this.loading=!1,this.contentList=[],this.params.page=1,1==t?this.getLike():this.getList())},getList:function(){var t=this;this.loading||(this.loading=!0,this.$set(this.params,"relation_id",this.id),(0,s.communityListApi)(this.params).then((function(i){var n=i.data,e=n.length<t.params.limit;t.contentList=t.contentList.concat(n),t.params.page++,t.loading=e})).catch((function(i){return t.$util.Tips({title:i})})))},getLike:function(){var t=this;this.loading||(this.loading=!0,(0,s.communityLikeListApi)().then((function(i){var n=i.data.list,e=n.length<t.params.limit;t.contentList=t.contentList.concat(n),t.params.page++,t.loading=e})).catch((function(i){return t.$util.Tips({title:i})})))},getUserInfo:function(){var t=this;(0,s.communityUserInfoApi)(this.id).then((function(i){t.userInfo=i.data,t.infoList[0].count=i.data.follow_num,t.infoList[1].count=i.data.friend_count,t.infoList[2].count=i.data.fans_num,t.infoList[3].count=i.data.like_num,(0,a.serviceRecord)({page:1,limit:1}).then((function(i){t.is_view=i.data.community.is_viewed}))})).catch((function(i){return t.$util.Tips({title:i},{tab:3})}))},userTo:function(t){if(this.userInfo.is_self){if("/pages/discover/discoverFollow/index?type=3"==t)return;this.authTo(t)}},authTo:function(i){t.navigateTo({url:i})},openSearch:function(){this.showSearch=!this.showSearch,!this.showSearch&&this.params.keyword&&(this.params.keyword="",this.params.page=1,this.contentList=[],this.loading=!1,this.getList())},searchSubmit:function(){this.params.page=1,this.contentList=[],this.loading=!1,this.getList()},reset:function(){this.params.keyword="",this.showSearch=!1},toggleModal:function(){this.showModal=!this.showModal},saveDesc:function(){var i=this;if(""==this.userInfo.desc)return this.$util.Tips({title:"请输入介绍"});(0,s.communityUpdateDescApi)({desc:this.userInfo.desc}).then((function(n){i.showModal=!1,i.getUserInfo(),t.showToast({title:n.msg,icon:"none"})})).catch((function(t){return i.$util.Tips({title:t})}))},followChange:function(){var t=this;0==this.userInfo.is_follow?(0,s.communitySetInsterestApi)(this.id,{status:1}).then((function(i){return t.userInfo.is_follow=1,t.$util.Tips({title:i.msg})})).catch((function(i){return t.$util.Tips({title:i})})):this.showFollow=!0},handleClick:function(t){var i=this,n=t.index;1==n?(0,s.communitySetInsterestApi)(this.id,{status:0}).then((function(t){return i.userInfo.is_follow=0,i.showFollow=!1,i.$util.Tips({title:t.msg})})).catch((function(t){return i.showFollow=!1,i.$util.Tips({title:t})})):this.showFollow=!1},flowLike:function(t){var i=this.contentList.findIndex((function(i){return t.id==i.id}));this.contentList[i].is_like=t.status,1==t.status?this.contentList[i].like_num++:this.contentList[i].like_num--}}};i.default=u}).call(this,n("df3c")["default"])}},[["5161","common/runtime","common/vendor"]]]);