require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/order_confirm/index"],{"120a":function(t,e,i){"use strict";i.r(e);var n=i("4c7d"),s=i("7265");for(var a in s)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return s[t]}))}(a);i("fc25");var o=i("828b"),r=Object(o["a"])(s["default"],n["b"],n["c"],!1,null,"1c26f6e0",null,!1,n["a"],void 0);e["default"]=r.exports},2248:function(t,e,i){"use strict";(function(t,e){var n=i("47a9");i("f076");n(i("3240"));var s=n(i("120a"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(s.default)}).call(this,i("3223")["default"],i("df3c")["createPage"])},"28cf":function(t,e,i){"use strict";(function(t){var n=i("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i("af34")),a=n(i("7ca3")),o=n(i("f89f")),r=i("606e"),c=i("92f9"),u=i("7391"),d=i("0f73"),l=(i("769c"),i("5088")),p=i("8f59"),f=n(i("89cc")),h=i("4d38"),g=i("2c18");function v(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function m(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?v(Object(i),!0).forEach((function(e){(0,a.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var _={},I={components:{NavBar:function(){i.e("components/NavBar").then(function(){return resolve(i("a7d8"))}.bind(null,i)).catch(i.oe)},invoicePicker:function(){i.e("pages/goods/components/invoicePicker/index").then(function(){return resolve(i("7437"))}.bind(null,i)).catch(i.oe)},couponListWindow:function(){Promise.all([i.e("common/vendor"),i.e("components/couponListWindow/index")]).then(function(){return resolve(i("a5f2"))}.bind(null,i)).catch(i.oe)},addressWindow:function(){i.e("components/addressWindow/index").then(function(){return resolve(i("e5fa"))}.bind(null,i)).catch(i.oe)},timeranges:function(){i.e("components/timeranges/index").then(function(){return resolve(i("2a68"))}.bind(null,i)).catch(i.oe)},areaWindow:function(){Promise.all([i.e("common/vendor"),i.e("components/areaWindow/index")]).then(function(){return resolve(i("e636"))}.bind(null,i)).catch(i.oe)},giftDrawer:function(){i.e("pages/goods/components/giftDrawer/index").then(function(){return resolve(i("1f1c"))}.bind(null,i)).catch(i.oe)},tuiModal:function(){i.e("components/tui-modal/index").then(function(){return resolve(i("6b9f"))}.bind(null,i)).catch(i.oe)}},mixins:[f.default],data:function(){return{imgHost:h.HTTP_REQUEST_URL,addressInfoArea:[],cityShow:2,display:!1,timeranges:[],isShow:!1,giveData:{give_integral:0,give_coupon:[]},giveCartInfo:[],confirm:[],id:0,isAddress:!1,textareaStatus:!0,formContent:"",payType:"weixin",openType:1,active:0,coupon:{coupon:!1,list:[],statusTile:"立即使用"},address:{address:!1},addressInfo:{},pinkId:0,addressId:0,couponId:0,cartId:"",type:0,activityId:0,BargainId:0,combinationId:0,seckillId:0,discountId:0,userInfo:{},mark:"",couponTitle:"请选择",coupon_price:0,promotions_detail:[],useIntegral:!1,integral_price:0,integral:0,ChangePrice:0,formIds:[],status:0,is_address:!1,shippingType:0,system_store:{},storePostage:0,contacts:"",contactsTel:"",mydata:{},storeList:[],store_self_mention:0,cartInfo:[],priceGroup:{},animated:!1,totalPrice:0,totalIntegral:0,integralRatio:"0",pagesUrl:"",orderKey:"",offlinePostage:"",isAuto:!1,isShowAuth:!1,from:"",news:1,invTitle:"不开发票",special_invoice:!1,invoice_func:!1,integral_ratio_status:1,header_type:"",invShow:!1,invList:[],invChecked:"",urlQuery:"",pay_close:!1,noCoupon:0,valid_count:0,discount_id:0,storeId:0,product_type:1,newImg:[],isDisplay:0,goodsType:0,timerangesIndex:0,isFocus:!1,latitude:"",longitude:"",site_logo:"",range:"",showGiftDrawer:!1,svip_status:!1,svip_price:0,contactsFocus:!1,telFocus:!1,isScrolling:!1}},computed:m(m({},(0,p.mapGetters)(["isLogin"])),{},{giftCount:function(){var t=0;return this.giveCartInfo.length&&this.giveCartInfo.forEach((function(e){t+=e.cart_num})),this.giveData.give_coupon.length&&(t+=this.giveData.give_coupon.length),this.giveData.give_integral>0&&(t+=1),t}}),onLoad:function(e){if(this.getLocation(),this.from="routine",!e.cartId)return this.$util.Tips({title:"请选择要购买的商品"},{tab:3,url:1});switch(this.couponId=e.couponId||0,this.noCoupon=e.noCoupon||0,this.pinkId=e.pinkId?parseInt(e.pinkId):0,this.addressId=e.addressId||0,this.cartId=e.cartId,this.is_address=!!e.is_address,this.news=e.new&&"0"!==e.new?1:0,t.setStorageSync("news",this.news),this.invChecked=e.invoice_id||"",this.header_type=e.header_type||"1",this.couponTitle=e.couponTitle||"请选择",this.luckRecordId=e.luckRecordId||"",e.invoice_type){case"1":this.invTitle="增值税电子普通发票";break;case"2":this.invTitle="增值税电子专用发票";break}e.invoice_name&&(this.invTitle=e.invoice_name),this.textareaStatus=!0,this.isLogin?this.getCheckShipping():(0,l.toLogin)()},onShow:function(){var e=this;t.$on("handClick",(function(i){i&&(e.addressId=i.addressId||0,e.getaddressInfo()),t.$off("handClick")}));var i=(0,o.default)(new Date(Number((new Date).getTime()))).format("HH:mm").split(":"),n=i;n.push(0);var a=[];[].concat((0,s.default)(n),(0,s.default)(i)).forEach((function(t){a.push(Number(t))})),this.timeranges=a},onPageScroll:function(e){t.$emit("scroll"),e.scrollTop>50?this.isScrolling=!0:e.scrollTop<50&&(this.isScrolling=!1)},methods:{getCheckShipping:function(){var e=this,i={cartId:this.cartId,new:this.news};(0,r.checkShipping)(i).then((function(t){e.isDisplay=t.data.type,2==e.isDisplay?e.addressType(1):(e.getaddressInfo(),e.getConfirm(),e.$nextTick((function(){this.$refs.addressWindow.getAddressList()})))})).catch((function(e){t.showToast({title:e,icon:"none"})}))},OnAreaAddress:function(t){var e="";e=4==t.length?t[0].label+"/"+t[1].label+"/"+t[2].label+"/"+t[3].label:3==t.length?t[0].label+"/"+t[1].label+"/"+t[2].label:2==t.length?t[0].label+"/"+t[1].label:t[0].label,this.confirm[this.timerangesIndex].value=e,_[this.timerangesIndex]=t},changeRegion:function(t){this.confirm[t].value||(this.addressInfoArea=[]),this.timerangesIndex=t,this.cityShow=Number(this.confirm[t].valConfig.tabVal)+1,this.display=!0,_[t]&&(this.addressInfoArea=_[t])},changeAddressClose:function(){this.display=!1},maskClick:function(t){},authColse:function(t){this.isShowAuth=t},DelPic:function(t,e){this.confirm[t].value;this.confirm[t].value.splice(e,1),this.$set(this.confirm[t],"value",this.confirm[t].value)},uploadpic:function(t){var e=this;this.$util.uploadImageOne("upload/image",(function(i){e.newImg.push(i.data.url),e.$set(e.confirm[t],"value",e.newImg)}))},invCancel:function(){this.invChecked="",this.invTitle="不开发票",this.invShow=!1},invChange:function(t){this.invChecked=t,this.invShow=!1;var e=this.invList.find((function(e){return e.id===t})),i="";i+=1===e.header_type?"个人":"企业",i+=1===e.type?"普通":"专用",i+="发票",this.invTitle=i},invClose:function(){this.invShow=!1,this.getInvoiceList()},getInvoiceList:function(){var e=this;t.showLoading({title:"正在加载…"}),(0,c.invoiceList)().then((function(i){t.hideLoading(),e.invList=i.data.map((function(t){return t.id=t.id.toString(),t}));var n=e.invList.find((function(t){return t.id==e.invChecked}));if(n){var s="";s+=1===n.header_type?"个人":"企业",s+=1===n.type?"普通":"专用",s+="发票",e.invTitle=s}})).catch((function(e){t.showToast({title:e,icon:"none"})}))},goInvoice:function(){this.getInvoiceList(),this.invShow=!0,this.urlQuery="new=".concat(this.news,"&cartId=").concat(this.cartId,"&pinkId=").concat(this.pinkId,"&couponId=").concat(this.couponId,"&addressId=").concat(this.addressId,"&specialInvoice=").concat(this.special_invoice,"&couponTitle=").concat(this.couponTitle)},goPay:function(){this.formVerify()},getLocation:function(){var e=this;t.getLocation({type:"gcj02",success:function(t){e.latitude=t.latitude,e.longitude=t.longitude}})},getList:function(){var t=this,e={page:1,limit:10,latitude:this.latitude,longitude:this.longitude};(0,d.storeListApi)(e).then((function(e){var i=e.data.list.list||[];t.$set(t,"storeList",i),t.$set(t,"system_store",i[0]),t.$set(t,"storeId",i[0].id),t.site_logo=e.data.site_logo,t.range=i[0].range,t.getConfirm()})).catch((function(t){}))},changeClose:function(){this.$set(this.address,"address",!1)},computedPrice:function(){var t=this,e=this.shippingType;(0,r.postOrderComputed)(this.orderKey,{addressId:this.addressId,useIntegral:this.useIntegral?1:0,couponId:this.couponId,shipping_type:parseInt(e)+1,payType:this.payType}).then((function(i){var n=i.data.result;n&&(t.totalPrice=n.pay_price,t.totalIntegral=n.pay_integral,t.integral_price=n.deduction_price,t.coupon_price=n.coupon_price,t.promotions_detail=n.promotions_detail,t.integral=t.useIntegral?n.SurplusIntegral:t.userInfo.integral,t.$set(t.priceGroup,"storePostage",1==e?0:n.pay_postage),t.$set(t.priceGroup,"storePostageDiscount",n.storePostageDiscount))})).catch((function(e){return t.$util.Tips({title:e})}))},addressType:function(t){var e=t;this.shippingType=parseInt(e),1==e?this.getList():this.getConfirm()},bindPickerChange:function(t){var e=t.detail.value;this.shippingType=e,this.computedPrice()},ChangCouponsClone:function(){this.$set(this.coupon,"coupon",!1)},changeTextareaStatus:function(){for(var t=0,e=this.coupon.list.length;t<e;t++)this.coupon.list[t].use_title="",this.coupon.list[t].is_use=0;this.textareaStatus=!0,this.status=0,this.$set(this.coupon,"list",this.coupon.list)},ChangCoupons:function(t){var e=this.coupon.list;e[t].is_use?(e[t].use_title="",e[t].is_use=0,this.couponTitle="请选择",this.couponId=0):(e[t].use_title="不使用",e[t].is_use=1,this.couponTitle=e[t].title,this.couponId=e[t].id),this.$set(this.coupon,"coupon",!1),this.$set(this.coupon,"list",e),this.getConfirm(1)},ruleToggle:function(t){this.coupon.list[t].ruleshow=!this.coupon.list[t].ruleshow},ChangeIntegral:function(){this.useIntegral=!this.useIntegral,this.computedPrice()},OnChangeAddress:function(t){this.textareaStatus=!0,this.addressId=t,this.address.address=!1,this.getConfirm(),this.getaddressInfo(),this.computedPrice()},bindHideKeyboard:function(t){this.mark=t.detail.value},objToArr:function(t){var e=Object.keys(t),i=e.map((function(e){return t[e]}));return i},getConfirm:function(t){var e,i=this,n=this,s=parseInt(this.shippingType)+1,a=0;1==s?(a=n.addressId,e=0):(a="",e=n.storeId),(0,r.orderConfirm)(n.cartId,n.news,a,s,e,n.couponId,n.luckRecordId).then((function(e){if(1==e.data.upgrade_addr&&(n.id=e.data.addressInfo.id,i.isAddress=!0),1!=t){var s=i.objToArr(e.data.custom_form);s.forEach((function(t,e,i){if(_[e]="","texts"==t.name)t.defaultValConfig.value?t.value=t.defaultValConfig.value:t.value="";else if("radios"==t.name)t.value=t.wordsConfig.list[0].val;else if("uploadPicture"==t.name)t.value=[];else if("dateranges"==t.name)if(0==t.valConfig.tabVal)if(0==t.valConfig.tabData){var n=(0,o.default)(new Date(Number((new Date).getTime()))).format("YYYY-MM-DD");t.value=[n,n]}else{var s=(0,o.default)(new Date(Number(new Date(t.valConfig.specifyDate[0]).getTime()))).format("YYYY-MM-DD"),a=(0,o.default)(new Date(Number(new Date(t.valConfig.specifyDate[1]).getTime()))).format("YYYY-MM-DD");t.value=[s,a]}else t.value=[];else if(-1!=["times","dates","timeranges"].indexOf(t.name))if(0==t.valConfig.tabVal)if(0==t.valConfig.tabData)if("times"==t.name)t.value=(0,o.default)(new Date(Number((new Date).getTime()))).format("HH:mm");else if("dates"==t.name)t.value=(0,o.default)(new Date(Number((new Date).getTime()))).format("YYYY-MM-DD");else{var r=(0,o.default)(new Date(Number((new Date).getTime()))).format("HH:mm");t.value=r+" - "+r}else"times"==t.name||"dates"==t.name?t.value=t.valConfig.specifyDate:t.value=t.valConfig.specifyDate[0]+" - "+t.valConfig.specifyDate[1];else t.value="";else t.value=""})),s.sort((function(t,e){return t.timestamp-e.timestamp})),n.$set(n,"confirm",s)}n.$set(n,"goodsType",e.data.type),n.$set(n,"userInfo",e.data.userInfo),n.$set(n,"integral",e.data.userInfo.integral),n.$set(n,"integralRatio",e.data.integralRatio),n.$set(n,"offlinePostage",e.data.offlinePostage),n.$set(n,"orderKey",e.data.orderKey),n.$set(n,"valid_count",e.data.valid_count),n.$set(n,"discount_id",e.data.discount_id),n.$set(n,"priceGroup",e.data.priceGroup),n.$set(n,"type",parseInt(e.data.type)),n.$set(n,"activityId",parseInt(e.data.activityId)),n.$set(n,"seckillId",parseInt(e.data.seckill_id)),n.$set(n,"BargainId",parseInt(e.data.bargain_id)),n.$set(n,"combinationId",parseInt(e.data.combination_id)),n.$set(n,"discountId",parseInt(e.data.discount_id)),n.$set(n,"invoice_func",e.data.invoice_func),n.$set(n,"integral_ratio_status",e.data.integral_ratio_status),n.$set(n,"special_invoice",e.data.special_invoice),n.$set(n,"store_self_mention",e.data.store_self_mention),n.$set(n,"svip_status",e.data.svip_status),n.$set(n,"svip_price",e.data.svip_price),n.$set(n,"contacts",e.data.userInfo.real_name),n.$set(n,"contactsTel",e.data.userInfo.record_pone),n.giveData.give_integral=e.data.give_integral,n.giveData.give_coupon=e.data.give_coupon;var a=e.data.cartInfo,r=[],c=[];a.forEach((function(t){1==t.is_gift?c.push(t):r.push(t)})),n.$set(n,"cartInfo",r),n.$set(n,"giveCartInfo",c);var u=-1;c.forEach((function(t){if(0==t.product_type)return u=0})),n.$set(n,"product_type",0==e.data.product_type||0==u?0:1),n.$set(n,"ChangePrice",n.totalPrice),n.getCouponList(),n.computedPrice(),i.addressId||i.couponId||n.$set(n,"totalPrice",n.$util.$h.Add(parseFloat(e.data.priceGroup.totalPrice),parseFloat(e.data.priceGroup.storePostage)))})).catch((function(t){return i.$util.Tips({title:t})}))},getCouponList:function(){var t=this,e=this,i={cartId:this.cartId,new:this.news,shipping_type:e.$util.$h.Add(e.shippingType,1),store_id:e.system_store?e.system_store.id:0};(0,r.getCouponsOrderPrice)(this.totalPrice,i).then((function(i){i.data.map((function(e){t.$set(e,"ruleshow",!1)})),e.$set(e.coupon,"list",i.data),e.openType=1}))},getaddressInfo:function(){var t=this;t.addressId?(0,c.getAddressDetail)(t.addressId).then((function(e){e.data.is_default=parseInt(e.data.is_default),t.addressInfo=e.data||{},t.addressId=e.data.id||0,t.address.addressId=e.data.id||0})):(0,c.getAddressDefault)().then((function(e){e.data.is_default=parseInt(e.data.is_default),t.addressInfo=e.data||{},t.addressId=e.data.id||0,t.address.addressId=e.data.id||0}))},showMaoLocation:function(){t.openLocation({latitude:parseFloat(this.system_store.latitude),longitude:parseFloat(this.system_store.longitude),scale:8,name:this.system_store.name,address:this.system_store.address+this.system_store.detailed_address})},couponTap:function(){var t=this;this.coupon.coupon=!0,this.coupon.list.forEach((function(e,i){e.id==t.couponId?e.is_use=1:e.is_use=0})),this.$set(this.coupon,"list",this.coupon.list)},car:function(){this.animated=!1},onAddress:function(e){var i=this,n=this;e?(n.textareaStatus=!1,n.address.address=!0,n.pagesUrl="/pages/users/user_address_list/index?news="+this.news+"&cartId="+this.cartId+"&pinkId="+this.pinkId+"&couponId="+this.couponId):(0,c.getAddressList)({page:1,limit:5}).then((function(e){e.data.length?(n.textareaStatus=!1,n.address.address=!0):t.navigateTo({url:"/pages/users/user_address/index?new="+i.news+"&cartId="+i.cartId})}))},payment:function(e){var i=this,n=this;(0,r.orderCreate)(n.orderKey,e).then((function(e){t.hideLoading(),(0,r.getCartCounts)().then((function(t){i.$store.commit("indexData/setCartNum",t.data.count)})),t.redirectTo({url:"/pages/goods/cashier/index?order_id=".concat(e.data.result.order_id,"&from_type=order")})})).catch((function(e){return t.hideLoading(),n.$util.Tips({title:e})}))},clickTextArea:function(){this.$refs.textarea.focus()},bindDateChange:function(t,e){this.confirm[e].value=t.target.value},bindTimeChange:function(t,e){this.confirm[e].value=t.target.value},bindSelectChange:function(t,e,i){this.confirm[e].value=i.wordsConfig.list[t.detail.value].val},getTimeranges:function(t){this.isShow=!0,this.timerangesIndex=t},confrim:function(t){this.isShow=!1,this.confirm[this.timerangesIndex].value=t.time;var e=[];t.val.forEach((function(t){e.push(Number(t))})),this.timeranges=e},cancels:function(){this.isShow=!1},radioChange:function(t,e,i){this.confirm[e].value=i.wordsConfig.list[t.detail.value].val},checkboxChange:function(t,e,i){var n=t.detail.value,s="";i.wordsConfig.list.forEach((function(t,e){n.forEach((function(i){e==i&&(s=s+(s?",":"")+t.val)}))})),this.confirm[e].value=s},formVerify:function(){if(!this.addressId&&!this.shippingType&&!this.product_type)return this.$util.Tips({title:"请选择收货地址"});if(1==this.shippingType){if(""==this.contacts||""==this.contactsTel)return this.$util.Tips({title:"请填写联系人或联系人电话"});if(!/^1(3|4|5|7|8|9|6)\d{9}$/.test(this.contactsTel))return this.$util.Tips({title:"请填写正确的手机号"});if(!/^[\u4e00-\u9fa5\w]{2,16}$/.test(this.contacts))return this.$util.Tips({title:"请填写您的真实姓名"});if(0==this.storeList.length)return this.$util.Tips({title:"暂无门店,请选择其他方式"})}for(var t=0;t<this.confirm.length;t++){var e=this.confirm[t];if(-1==["radios"].indexOf(e.name)&&(e.titleShow.val||-1==["uploadPicture","dateranges"].indexOf(e.name)&&e.value&&e.value.trim())){if(("texts"===e.name&&0==e.valConfig.tabVal||-1!=["dates","times","selects","citys","checkboxs"].indexOf(e.name))&&(!e.value||e.value&&!e.value.trim()))return this.$util.Tips({title:"请填写".concat(e.titleConfig.value)});if("timeranges"===e.name&&!e.value)return this.$util.Tips({title:"请选择".concat(e.titleConfig.value)});if("dateranges"===e.name&&!e.value.length)return this.$util.Tips({title:"请选择".concat(e.titleConfig.value)});if("texts"===e.name&&4==e.valConfig.tabVal&&e.value<=0)return this.$util.Tips({title:"请填写大于0的".concat(e.titleConfig.value)});if("texts"===e.name&&3==e.valConfig.tabVal&&!/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(e.value))return this.$util.Tips({title:"请填写正确的".concat(e.titleConfig.value)});if("texts"===e.name&&1==e.valConfig.tabVal&&!/^1(3|4|5|7|8|9|6)\d{9}$/i.test(e.value))return this.$util.Tips({title:"请填写正确的".concat(e.titleConfig.value)});if("texts"===e.name&&2==e.valConfig.tabVal&&!/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$|^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/i.test(e.value))return this.$util.Tips({title:"请填写正确的".concat(e.titleConfig.value)});if("uploadPicture"===e.name&&!e.value.length)return this.$util.Tips({title:"请上传".concat(e.titleConfig.value)})}}if(4==this.type&&this.totalIntegral>this.userInfo.integral)return this.$util.Tips({title:"您的积分不足以抵扣本单积分金额"});this.SubOrder()},SubOrder:function(e){var i,n=this;i={custom_form:n.confirm,real_name:n.contacts,phone:n.contactsTel,addressId:n.addressId,formId:"",couponId:n.couponId,payType:n.payType,useIntegral:n.useIntegral,bargainId:n.BargainId,combinationId:n.combinationId,discountId:n.discountId,pinkId:n.pinkId,seckill_id:n.seckillId,mark:n.mark,store_id:1==n.shippingType&&n.system_store?n.system_store.id:0,from:n.from,shipping_type:n.$util.$h.Add(n.shippingType,1),new:n.news,invoice_id:n.invChecked},t.showLoading({title:"订单支付中"}),(0,u.openPaySubscribe)().then((function(){n.payment(i)}))},goDetail:function(e){t.navigateTo({url:"/pages/goods_details/index?id=".concat(e,"&fromType=1")})},addCart:function(t,e){var i=this;if(1==t){if(e.productInfo.stock==e.cart_num)return this.$util.Tips({title:"该产品没有更多库存了！"});e.cart_num++}else{if(e.productInfo.min_qty&&e.cart_num==e.productInfo.min_qty)return;if(1==e.cart_num)return;e.cart_num--}var n={cartNum:e.cart_num,new:this.news,uniqueId:e.product_attr_unique,productId:e.productInfo.id,key:this.news?e.id:"",is_set:1};(0,d.postCartAdd)(n).then((function(t){i.getConfirm(),setTimeout((function(){i.computedPrice()}),500)})).catch((function(t){return i.$util.Tips({title:t})}))},setValue:(0,g.Debounce)((function(t,e){var i=this;if(t.detail.value){var n=t.detail.value;if(e.productInfo.limit_num>0&&n>e.productInfo.limit_num)return e.cart_num=e.productInfo.limit_num,this.$util.Tips({title:"购物车数量不能大于限购数量"});var s={cartNum:n,new:this.news,uniqueId:e.product_attr_unique,productId:e.productInfo.id,key:this.news?this.cartId:"",is_set:1};(0,d.postCartAdd)(s).then((function(t){i.getConfirm(),setTimeout((function(){i.computedPrice()}),500)})).catch((function(t){return i.$util.Tips({title:t})}))}})),goPage:function(e,i){1==e?t.navigateTo({url:i}):2==e?t.switchTab({url:i}):3==e&&t.navigateBack()},closeDrawer:function(){this.showGiftDrawer=!1},hideModal:function(){this.isAddress=!1},handleClick:function(e){var i=e.index;1==i&&t.navigateTo({url:"/pages/users/user_address/index?id="+this.id+"&new="+this.news+"&cartId="+this.cartId+"&pinkId="+this.pinkId+"&couponId="+this.couponId}),this.isAddress=!1},clearInput:function(t){0==t?(this.contacts="",this.contactsFocus=!0):(this.contactsTel="",this.telFocus=!0)},isDisabled:function(t){return!(!t.productInfo.min_qty&&!t.productInfo.limit_num)},interceptPay:function(){if(!this.addressId)return this.$util.Tips({title:"请添加地址以后再点击提交订单"})}}};e.default=I}).call(this,i("df3c")["default"])},"4c7d":function(t,e,i){"use strict";i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return a})),i.d(e,"a",(function(){return n}));var n={uniDatetimePicker:function(){return Promise.all([i.e("common/vendor"),i.e("uni_modules/uni-datetime-picker/components/uni-datetime-picker/uni-datetime-picker")]).then(i.bind(null,"df90"))}},s=function(){var t=this,e=t.$createElement,i=(t._self._c,0==t.shippingType?[1,2].includes(t.isDisplay):null),n=0!=t.shippingType?[1,2].includes(t.isDisplay):null,s=0!=t.shippingType?t.storeList.length:null,a=[0,6].includes(t.goodsType),o=t.__map(t.cartInfo,(function(e,i){var n=t.__get_orig(e),s=a?t.isDisabled(e):null;return{$orig:n,m0:s}})),r=t.giftCount>0?t.giveCartInfo.length<=4&&!t.giveData.give_coupon.length&&0==t.giveData.give_integral:null,c=t.giftCount>0&&r?t.giveData.give_coupon.length:null,u=t.giftCount>0&&!r?t.giveData.give_coupon.length:null,d=[0,6].includes(t.type)&&!t.noCoupon&&7!=t.goodsType&&0==t.priceGroup.firstOrderPrice,l=[0,6].includes(t.type)&&1==t.integral_ratio_status,p=t.confirm.length,f=p?t.__map(t.confirm,(function(e,i){var n=t.__get_orig(e),s="dateranges"==e.name?e.value.length:null,a="uploadPicture"==e.name?e.value.length:null,o="uploadPicture"==e.name&&a<3?e.value.length:null,r="uploadPicture"!=e.name||a<3?null:e.value.length;return{$orig:n,g10:s,g11:a,g12:o,g13:r}})):null,h=t.priceGroup.storePostage>0?(parseFloat(t.priceGroup.storePostage)+parseFloat(t.priceGroup.storePostageDiscount)).toFixed(2):null,g=t.priceGroup.vipPrice>0&&t.userInfo.vip&&[0,6].includes(t.type),v=g?parseFloat(t.priceGroup.vipPrice).toFixed(2):null,m=t.priceGroup.storePostageDiscount>0?parseFloat(t.priceGroup.storePostageDiscount).toFixed(2):null,_=t.coupon_price>0?parseFloat(t.coupon_price).toFixed(2):null,I=t.integral_price>0?parseFloat(t.integral_price).toFixed(2):null,y=t.__map(t.promotions_detail,(function(e,i){var n=t.__get_orig(e),s=parseFloat(e.promotions_price),a=parseFloat(e.promotions_price).toFixed(2);return{$orig:n,m1:s,g20:a}})),w=(t.valid_count>0&&!t.discount_id||t.valid_count==t.cartInfo.length&&t.discount_id)&&t.shippingType||!t.shippingType&&t.addressId||0!=t.product_type;t._isMounted||(t.e0=function(e){t.showGiftDrawer=!0},t.e1=function(e,i,n){var s=[],a=arguments.length-3;while(a-- >0)s[a]=arguments[a+3];var o=s[s.length-1].currentTarget.dataset,r=o.eventParams||o["event-params"];i=r.index,n=r.item;return t.radioChange(e,i,n)}),t.$mp.data=Object.assign({},{$root:{g0:i,g1:n,g2:s,g3:a,l0:o,g4:r,g5:c,g6:u,g7:d,g8:l,g9:p,l1:f,g14:h,g15:g,g16:v,g17:m,g18:_,g19:I,l2:y,g21:w}})},a=[]},7265:function(t,e,i){"use strict";i.r(e);var n=i("28cf"),s=i.n(n);for(var a in n)["default"].indexOf(a)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(a);e["default"]=s.a},f3cd:function(t,e,i){},fc25:function(t,e,i){"use strict";var n=i("f3cd"),s=i.n(n);s.a}},[["2248","common/runtime","common/vendor"]]]);