require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/goods_comment_con/index"],{"18ac":function(t,e,i){"use strict";(function(t,e){var c=i("47a9");i("f076");c(i("3240"));var n=c(i("f01b"));t.__webpack_require_UNI_MP_PLUGIN__=i,e(n.default)}).call(this,i("3223")["default"],i("df3c")["createPage"])},"36a3":function(t,e,i){"use strict";var c=i("b80c"),n=i.n(c);n.a},"3b07":function(t,e,i){"use strict";i.r(e);var c=i("6c93"),n=i.n(c);for(var r in c)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return c[t]}))}(r);e["default"]=n.a},"5f87":function(t,e,i){"use strict";i.d(e,"b",(function(){return c})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){}));var c=function(){var t=this.$createElement,e=(this._self._c,this.pics.length);this.$mp.data=Object.assign({},{$root:{g0:e}})},n=[]},"6c93":function(t,e,i){"use strict";(function(t){var c=i("47a9");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=c(i("7ca3")),r=i("606e"),s=i("eb8a"),o=(i("5088"),i("8f59")),u=c(i("89cc")),a=i("4d38");function d(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);e&&(c=c.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,c)}return i}function p(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?d(Object(i),!0).forEach((function(e){(0,n.default)(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var l={components:{},mixins:[u.default],data:function(){var t;return t={imgHost:a.HTTP_REQUEST_URL,pics:[],replyNav:[{title:"好评",pic:a.HTTP_REQUEST_URL+"/statics/images/product/product_reply_icon1_0.png",activePic:a.HTTP_REQUEST_URL+"/statics/images/product/product_reply_icon1.png",value:3},{title:"中评",pic:a.HTTP_REQUEST_URL+"/statics/images/product/product_reply_icon2_0.png",activePic:a.HTTP_REQUEST_URL+"/statics/images/product/product_reply_icon2.png",value:2},{title:"差评",pic:a.HTTP_REQUEST_URL+"/statics/images/product/product_reply_icon3_0.png",activePic:a.HTTP_REQUEST_URL+"/statics/images/product/product_reply_icon3.png",value:1}],orderId:"",unique:"",productInfo:{},cart_num:0,isAuto:!1,isShowAuth:!1,canvasWidth:"",canvasHeight:"",canvasStatus:!1,product_score:-1,service_score:-1,delivery_score:-1,reply_score:3,comment:"",starArr:[1,2,3,4,5],is_sync:0,community_status:1},(0,n.default)(t,"canvasWidth",""),(0,n.default)(t,"canvasHeight",""),t},watch:{isLogin:{handler:function(t,e){},deep:!0}},computed:p(p({},(0,o.mapGetters)(["isLogin"])),{},{isSelectStar:function(){if(this.product_score>=0&&this.service_score>=0&&this.delivery_score>=0&&this.comment)return!0}}),onLoad:function(t){if(!t.unique||!t.uni)return this.$util.Tips({title:"缺少参数"},{tab:3,url:1});this.unique=t.unique,this.orderId=t.uni,this.isLogin&&(this.getOrderProduct(),this.getConfig())},onShow:function(){t.removeStorageSync("form_type_cart")},methods:{getConfig:function(){var t=this;(0,s.getCommunityConfig)().then((function(e){t.community_status=e.data.community_status}))},getOrderProduct:function(){var t=this;(0,r.orderProduct)(t.unique).then((function(e){t.$set(t,"productInfo",e.data.productInfo),t.cart_num=e.data.cart_num}))},stars:function(t,e){0==t?this.product_score=e:1==t?this.service_score=e:this.delivery_score=e},replyNavChange:function(t){this.reply_score=t},checkSync:function(){this.is_sync?this.is_sync=0:this.is_sync=1},DelPic:function(t){this.pics[t];this.pics.splice(t,1),this.$set(this,"pics",this.pics)},uploadpic:function(){var t=this,e=this;this.canvasStatus=!0,e.$util.uploadImageChange({count:8,url:"upload/image"},(function(t){e.pics.push(t.data.url)}),(function(e){t.canvasStatus=!1}),(function(e){t.canvasWidth=e.w,t.canvasHeight=e.h}))},formSubmit:function(){var e=this;if(!this.comment)return e.$util.Tips({title:"请填写你对宝贝的心得！"});if(!this.isSelectStar)return e.$util.Tips({title:"请完成打分！"});if(this.community_status&&this.is_sync&&!this.pics.length)return e.$util.Tips({title:"请上传要分享的图片！"});var i={reply_score:this.reply_score,product_score:this.product_score,service_score:this.service_score,delivery_score:this.delivery_score,pics:this.pics,unique:this.unique,comment:this.comment,is_sync:this.is_sync};t.showLoading({title:"正在发布评论……"}),(0,r.orderComment)(i).then((function(i){t.hideLoading();i.data.to_lottery,e.orderId;var c={tab:3,url:1},n=getCurrentPages();n[n.length-3]&&"pages/goods/order_pay_status/index"==n[n.length-3].route&&(c.tab=5,c.url="/pages/goods/order_list/index"),i.data.to_lottery&&(c.tab=5,c.url="/pages/goods/goods_comment_con/lottery_comment?type=4&order_id="+e.orderId),e.$util.Tips({title:"感谢您的评价!",icon:"success"},c)})).catch((function(i){return t.hideLoading(),e.$util.Tips({title:i})}))}}};e.default=l}).call(this,i("df3c")["default"])},b80c:function(t,e,i){},f01b:function(t,e,i){"use strict";i.r(e);var c=i("5f87"),n=i("3b07");for(var r in n)["default"].indexOf(r)<0&&function(t){i.d(e,t,(function(){return n[t]}))}(r);i("36a3");var s=i("828b"),o=Object(s["a"])(n["default"],c["b"],c["c"],!1,null,"2be3b6ce",null,!1,c["a"],void 0);e["default"]=o.exports}},[["18ac","common/runtime","common/vendor"]]]);