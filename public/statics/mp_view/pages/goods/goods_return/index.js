require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/goods_return/index"],{"540c":function(n,t,e){"use strict";var r=e("6410"),u=e.n(r);u.a},6410:function(n,t,e){},"6ad6":function(n,t,e){"use strict";e.d(t,"b",(function(){return r})),e.d(t,"c",(function(){return u})),e.d(t,"a",(function(){}));var r=function(){var n=this.$createElement,t=(this._self._c,this.refundNum?this.refundCartInfo.length:null),e=1!==this.refundCartInfo.length||1==this.refund_total_num,r=this.refundReason.RefundArray.length,u=this.refund_reason_wap_img.length;this.$mp.data=Object.assign({},{$root:{g0:t,g1:e,g2:r,g3:u}})},u=[]},8946:function(n,t,e){"use strict";(function(n,t){var r=e("47a9");e("f076");r(e("3240"));var u=r(e("ec40"));n.__webpack_require_UNI_MP_PLUGIN__=e,t(u.default)}).call(this,e("3223")["default"],e("df3c")["createPage"])},c18a:function(n,t,e){"use strict";(function(n){var r=e("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=r(e("7ca3")),o=e("606e"),i=e("5088"),s=e("8f59"),a=r(e("89cc"));function d(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function f(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?d(Object(e),!0).forEach((function(t){(0,u.default)(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):d(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}var c={components:{refundPopup:function(){e.e("pages/goods/components/refundPopup/index").then(function(){return resolve(e("355e"))}.bind(null,e)).catch(e.oe)}},mixins:[a.default],data:function(){return{id:0,cartIds:[],refund_reason_wap_img:[],status:{},refundCartInfo:[],refund_total_num:0,orderId:0,refundNumData:[],refund_num_index:0,productType:0,isShowAuth:!1,refund_price:0,fontNum:0,refundNum:0,refundItem:"",refundReason:{RefundArray:[],show:!1},returnType:"",returnGoods:{RefundArray:["仅退款(无需退货)","退货退款(快递退回)","退货退款(到店退货)"],show:!1},returnGoodsIndex:0}},computed:f(f({},(0,s.mapGetters)(["isLogin"])),{},{inputWid:function(){return function(n){return""==n?"300rpx":16*String(n).length+"rpx"}}}),watch:{isLogin:{handler:function(n,t){},deep:!0}},onPageScroll:function(t){n.$emit("scroll")},onLoad:function(n){this.returnType=this.returnGoods.RefundArray[0],this.orderId=n.orderId,this.id=n.id,this.productType=parseInt(n.productType)||0,n.cartIds&&(this.cartIds=JSON.parse(n.cartIds)||[]),this.isLogin?(this.refundGoodsInfo(),this.getRefundReason()):(0,i.toLogin)()},onShow:function(){n.removeStorageSync("form_type_cart")},methods:{onLoadFun:function(){this.refundGoodsInfo(),this.getRefundReason(),this.isShowAuth=!1},authColse:function(n){this.isShowAuth=n},reasonTap:function(){this.refundReason.show=!0},changeClose:function(){this.refundReason.show=!1},selectInfo:function(n){this.refundItem=this.refundReason.RefundArray[n],this.changeClose()},returnTypeTap:function(){this.returnGoods.show=!0},changeGoodsClose:function(){this.returnGoods.show=!1},selectGoodsInfo:function(n){this.returnGoodsIndex=n,this.returnType=this.returnGoods.RefundArray[n],this.changeGoodsClose()},sumfontnum:function(n){this.fontNum=n.detail.value.length},refundGoodsInfo:function(){var n=this;(0,o.postRefundGoods)({id:this.id,cart_ids:this.cartIds}).then((function(t){var e=t.data;n.status=e._status,n.refundCartInfo=e.cartInfo,n.refundNum=e.refund_num,n.refundCartInfo.forEach((function(t){n.refund_total_num=n.$util.$h.Add(n.refund_total_num,t.cart_num);var e=n.$util.$h.Add(n.refund_price,n.$util.$h.Mul(t.cart_num,t.truePrice));n.refund_price=e})),n.refundNumData=Array(n.refund_total_num).fill(0).map((function(n,t){return t+1})),n.refund_num_index=n.refund_total_num-1})).catch((function(t){return n.$util.Tips({title:t})}))},getRefundReason:function(){var n=this,t=this;(0,o.ordeRefundReason)().then((function(e){t.$set(t.refundReason,"RefundArray",e.data),n.refundItem=e.data[0]}))},DelPic:function(n){var t=n;this.refund_reason_wap_img[t];this.refund_reason_wap_img.splice(t,1),this.$set(this,"refund_reason_wap_img",this.refund_reason_wap_img)},uploadpic:function(){var n=this;this.$util.uploadImageOne("upload/image",(function(t){n.refund_reason_wap_img.push(t.data.url),n.$set(n,"refund_reason_wap_img",n.refund_reason_wap_img)}))},subRefund:function(n){var t=this,e=n.detail.value,r=this.refundCartInfo;1===r.length&&(this.cartIds=[{cart_id:r[0].id,cart_num:this.refund_num_index+1}]),(0,o.returnGoodsSubmit)(this.id,{text:this.refundItem||"",refund_reason_wap_explain:e.refund_reason_wap_explain,refund_reason_wap_img:this.refund_reason_wap_img.join(","),refund_type:parseInt(this.returnGoodsIndex)+1,uni:this.orderId,cart_ids:this.cartIds,refund_price:this.refund_price}).then((function(n){return t.$util.Tips({title:"申请成功",icon:"success"},{tab:5,url:"/pages/users/user_return_list/index?isT=1"})})).catch((function(n){return t.$util.Tips({title:n})}))},returnGoodsNum:function(n){var t=Number(n.detail.value);this.$set(this,"refund_num_index",t);var e=this.$util.$h.Mul(this.refundNumData[t],this.refundCartInfo[0].truePrice);this.refund_price=e}}};t.default=c}).call(this,e("df3c")["default"])},ec40:function(n,t,e){"use strict";e.r(t);var r=e("6ad6"),u=e("fdb9");for(var o in u)["default"].indexOf(o)<0&&function(n){e.d(t,n,(function(){return u[n]}))}(o);e("540c");var i=e("828b"),s=Object(i["a"])(u["default"],r["b"],r["c"],!1,null,"12e74955",null,!1,r["a"],void 0);t["default"]=s.exports},fdb9:function(n,t,e){"use strict";e.r(t);var r=e("c18a"),u=e.n(r);for(var o in r)["default"].indexOf(o)<0&&function(n){e.d(t,n,(function(){return r[n]}))}(o);t["default"]=u.a}},[["8946","common/runtime","common/vendor"]]]);