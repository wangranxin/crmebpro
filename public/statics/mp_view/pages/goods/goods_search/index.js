require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/goods/goods_search/index"],{"0732":function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){}));var o=function(){var e=this,t=e.$createElement,n=(e._self._c,e.history.length),o=n&&!e.isShowMore?e.history.slice(0,7):null,a=n?e.history.length:null,i=e.salesRecommendList.length,c=i?e.salesRecommendList.slice(3):null,s=e.scoreRecommendList.length,r=s?e.scoreRecommendList.slice(3):null,u=e.collectRecommendList.length,l=u?e.collectRecommendList.slice(3):null,h=e.newPartyList.length;e._isMounted||(e.e0=function(t,n){var o=arguments[arguments.length-1].currentTarget.dataset,a=o.eventParams||o["event-params"];n=a.item;return e.setHotSearchValue(n.keyword)},e.e1=function(t){e.isShowMore=!e.isShowMore},e.e2=function(t,n){var o=arguments[arguments.length-1].currentTarget.dataset,a=o.eventParams||o["event-params"];n=a.item;return e.goDetail(n)},e.e3=function(t,n){var o=arguments[arguments.length-1].currentTarget.dataset,a=o.eventParams||o["event-params"];n=a.item;return e.goDetail(n)},e.e4=function(t,n){var o=arguments[arguments.length-1].currentTarget.dataset,a=o.eventParams||o["event-params"];n=a.item;return e.goDetail(n)}),e.$mp.data=Object.assign({},{$root:{g0:n,g1:o,g2:a,g3:i,l0:c,g4:s,l1:r,g5:u,l2:l,g6:h}})},a=[]},"0cd1":function(e,t,n){"use strict";var o=n("8571"),a=n.n(o);a.a},"4b41":function(e,t,n){"use strict";n.r(t);var o=n("0732"),a=n("de8c");for(var i in a)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("56b7"),n("0cd1");var c=n("828b"),s=Object(c["a"])(a["default"],o["b"],o["c"],!1,null,"1c84efbc",null,!1,o["a"],void 0);t["default"]=s.exports},"56b7":function(e,t,n){"use strict";var o=n("6b97"),a=n.n(o);a.a},"6b97":function(e,t,n){},8415:function(e,t,n){"use strict";(function(e){var o=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n("0f73"),i=n("360a"),c=o(n("89cc")),s=n("95b5"),r=n("4d38"),u=n("2c18"),l=e.getWindowInfo().statusBarHeight,h={components:{recommend:function(){Promise.all([n.e("common/vendor"),n.e("components/recommend/index")]).then(function(){return resolve(n("a60c"))}.bind(null,n)).catch(n.oe)}},mixins:[c.default],data:function(){return{hostProduct:[],searchValue:"",focus:!0,bastList:[],hotSearchList:[],isSpin:!1,first:0,limit:8,page:1,loading:!1,loadend:!1,loadTitle:"加载更多",hotPage:1,isScroll:!0,history:[],imgHost:r.HTTP_REQUEST_URL,salesRecommendList:[],scoreRecommendList:[],collectRecommendList:[],sysHeight:l,newPartyList:[],isShowMore:!1}},computed:{fuzzyHeight:function(){var t=e.getWindowInfo().screenHeight;return t-this.sysHeight-56}},onLoad:function(e){var t=this;this.searchValue=e.searchVal||"",this.getSearchHotKeywords(),this.getSearchRecommend(),setTimeout((function(){t.newPartySearch()}),1e3)},onShow:function(t){e.removeStorageSync("form_type_cart"),this.searchList()},onPullDownRefresh:function(){var t=this;this.getSearchHotKeywords(),this.getSearchRecommend(),this.searchList(),setTimeout((function(){t.newPartySearch(),e.stopPullDownRefresh()}),1e3)},onPageScroll:function(t){e.$emit("scroll")},methods:{refresh:function(){this.isSpin=!0,this.getSearchHotKeywords()},getSearchHotKeywords:function(){var e=this;(0,a.getHotWordApi)().then((function(t){e.hotSearchList=t.data,setTimeout((function(t){e.isSpin=!1}),1e3)}))},searchList:function(){var e=this;(0,i.searchList)({page:1,limit:10}).then((function(t){e.history=t.data}))},clear:function(){var t=this;(0,i.clearSearch)().then((function(n){e.showToast({title:n.msg,success:function(){t.history=[]}})}))},inputConfirm:function(t){t.detail.value&&(e.hideKeyboard(),this.setHotSearchValue(t.detail.value))},setValue:(0,u.Debounce)((function(e){this.newPartySearch()})),newPartySearch:function(){var e=this;(0,a.getSearchKeyword)({keyword:this.searchValue}).then((function(t){e.newPartyList=t.data.list,e.newPartyList.map((function(n){e.$set(n,"keyword",e.brightKeyword(n.store_name,t.data.keyword))}))}))},brightKeyword:function(e,t){return e.indexOf(t)>-1?(e='<p class="line1">'.concat(e,"</p>"),e.replace(t,'<span style="color: #C9771E;">'.concat(t,"</span>"))):e},setCommentSearch:function(t){e.navigateTo({url:"/pages/goods/goods_list/index?productId="+t})},setHotSearchValue:function(e){this.$set(this,"searchValue",e),this.focus=!1,this.searchBut()},searchBut:function(){if(this.focus=!1,!(this.searchValue.length>0))return this.$util.Tips({title:"请输入要搜索的商品",icon:"none",duration:1e3,mask:!0});this.newPartyList=[],e.navigateTo({url:"/pages/goods/goods_list/index?searchValue="+this.searchValue})},getSearchRecommend:function(){var e=this;(0,a.getSearchRecommendApi)(1).then((function(t){e.salesRecommendList=t.data})),(0,a.getSearchRecommendApi)(2).then((function(t){e.scoreRecommendList=t.data})),(0,a.getSearchRecommendApi)(3).then((function(t){e.collectRecommendList=t.data}))},goDetail:function(t){(0,s.goShopDetail)(t,this.uid).catch((function(n){e.navigateTo({url:"/pages/goods_details/index?id=".concat(t.id,"&fromType=1")})}))},goRank:function(t){e.navigateTo({url:"/pages/columnGoods/rank/index?type=".concat(t)})},clearSearchVal:function(){this.searchValue="",this.newPartyList=[]}}};t.default=h}).call(this,n("df3c")["default"])},8435:function(e,t,n){"use strict";(function(e,t){var o=n("47a9");n("f076");o(n("3240"));var a=o(n("4b41"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])},8571:function(e,t,n){},de8c:function(e,t,n){"use strict";n.r(t);var o=n("8415"),a=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a}},[["8435","common/runtime","common/vendor"]]]);