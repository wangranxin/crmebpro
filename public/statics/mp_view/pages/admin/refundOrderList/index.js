require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/admin/refundOrderList/index"],{"939f":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,n=(e._self._c,e.list.length),i=n?e.__map(e.list,(function(t,n){var i=e.__get_orig(t),a=[0,1,2].includes(t.refund_type),r=[4,5].includes(t.refund_type),u=[3,6].includes(t.refund_type),o=t._info.length,s=[1].includes(t.apply_type)&&[0].includes(t.refund_type),c=[2,3].includes(t.apply_type)&&[0].includes(t.refund_type),d=[2].includes(t.apply_type)&&[5].includes(t.refund_type),l=[1,2,3].includes(t.apply_type)&&[4,5].includes(t.refund_type);return{$orig:i,g1:a,g2:r,g3:u,g4:o,g5:s,g6:c,g7:d,g8:l}})):null;e._isMounted||(e.e0=function(t){e.filterShow=!0},e.e1=function(t){e.filterShow=!1}),e.$mp.data=Object.assign({},{$root:{g0:n,l0:i}})},a=[]},9422:function(e,t,n){"use strict";n.r(t);var i=n("939f"),a=n("ed5f");for(var r in a)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(r);n("e37a");var u=n("828b"),o=Object(u["a"])(a["default"],i["b"],i["c"],!1,null,"be9bcf7e",null,!1,i["a"],void 0);t["default"]=o.exports},e37a:function(e,t,n){"use strict";var i=n("e6d4"),a=n.n(i);a.a},e6d4:function(e,t,n){},e9cb:function(e,t,n){"use strict";(function(e){var i=n("47a9");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,r=i(n("7eb4")),u=i(n("7ca3")),o=i(n("ee10")),s=n("6af6"),c=n("096b"),d=n("2c18"),l=n("4d38"),f={name:"AdminOrderList",components:{Loading:function(){n.e("components/Loading/index").then(function(){return resolve(n("e83c"))}.bind(null,n)).catch(n.oe)},PriceChange:function(){n.e("pages/admin/components/PriceChange/index").then(function(){return resolve(n("955d"))}.bind(null,n)).catch(n.oe)},emptyPage:function(){n.e("components/emptyPage").then(function(){return resolve(n("398a"))}.bind(null,n)).catch(n.oe)},NavBar:function(){n.e("components/NavBar").then(function(){return resolve(n("a7d8"))}.bind(null,n)).catch(n.oe)}},data:function(){return{getHeight:this.$util.getWXStatusHeight(),iconColor:"#333333",isScrolling:!1,top:0,navHeight:0,isFixed:!1,filterShow:!1,openErp:!1,current:"",change:!1,types:0,where:{order_id:"",refundTypes:5,apply_type:"",page:1,limit:10},list:[],loaded:!1,loading:!1,orderInfo:{},status:"",state:5,isRefund:0,imgHost:l.HTTP_REQUEST_URL,dateSelected:"",dateList:[{label:"全部",val:""},{label:"退货退款",val:"2"},{label:"仅退款",val:"1"}],payList:[{label:"全部",val:""},{label:"微信支付",val:"1"},{label:"支付宝支付",val:"4"},{label:"余额支付",val:"2"},{label:"线下支付",val:"3"}]}},onLoad:function(e){e.types;this.getErpConfig()},onShow:function(){this.init()},mounted:function(){var t=this,n=e.createSelectorQuery().in(this);n.select("#nav").boundingClientRect((function(e){t.top=e.top,t.navHeight=e.height})).exec()},onPageScroll:function(e){},methods:(a={searchSubmit:function(){},statusChange:function(e){this.status=e},goDelivery:function(t){this.openErp||e.navigateTo({url:"/pages/admin/delivery/index?id="+t.order_id+"&listId="+t.id+"&totalNum="+t.total_num+"&orderStatus="+t._status+"&comeType=1&productType="+t.product_type})},getErpConfig:function(){var e=this;(0,c.erpConfig)().then((function(t){e.openErp=t.data.open_erp})).catch((function(t){e.$util.Tips({title:t})}))},getIndex:function(){var e=this;if(!e.loading&&!e.loaded){e.loading=!0;var t=(0,s.adminRefundList)(e.where);t.then((function(t){e.loading=!1,e.loaded=t.data.length<e.where.limit,e.list.push.apply(e.list,t.data),e.where.page=e.where.page+1}),(function(t){e.$util.Tips({title:t})}))}},init:function(){this.list=[],this.where.page=1,this.loaded=!1,this.loading=!1,this.getIndex(),this.current=""}},(0,u.default)(a,"searchSubmit",(function(){this.init()})),(0,u.default)(a,"changeStatus",(function(e){this.state!=e&&(this.state=e,this.where.refundTypes=e,this.init())})),(0,u.default)(a,"modify",(function(e,t,n){this.openErp&&1!=t||(this.change=!0,this.status=t.toString(),this.orderInfo=e,2==t&&(this.isRefund=n))})),(0,u.default)(a,"changeclose",(function(e){this.change=e,this.orderInfo={}})),(0,u.default)(a,"objOrderRefund",(function(e){var t=this;(0,s.setOrderRefund)(e).then((function(e){t.change=!1,t.$util.Tips({title:e.msg}),t.init()}),(function(e){t.change=!1,t.$util.Tips({title:e})}))})),(0,u.default)(a,"savePrice",(function(e){var t=this;return(0,o.default)(r.default.mark((function n(){var i,a,u,o,c,l;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(i=t,a={},u=e.price,o=e.refund_price,i.orderInfo.refund_status,c=e.remark,a.order_id=i.orderInfo.order_id,0!=i.status){n.next=9;break}if((0,d.isMoney)(u)){n.next=5;break}return n.abrupt("return",i.$util.Tips({title:"请输入正确的金额"}));case 5:a.price=u,(0,s.setAdminOrderPrice)(a).then((function(e){i.change=!1,i.$util.Tips({title:"改价成功",icon:"success"}),i.init()}),(function(e){i.change=!1,i.$util.Tips({title:"改价失败",icon:"none"})})),n.next=34;break;case 9:if(2!=i.status){n.next=22;break}if(!t.isRefund){n.next=18;break}if((0,d.isMoney)(o)){n.next=13;break}return n.abrupt("return",i.$util.Tips({title:"请输入正确的金额"}));case 13:a.price=o,a.type=e.type,t.objOrderRefund(a),n.next=20;break;case 18:1==e.type&&(0,s.orderRefundAgree)(t.orderInfo.id).then((function(e){i.change=!1,i.$util.Tips({title:e.msg}),i.init()})).catch((function(e){i.change=!1,i.$util.Tips({title:e})})),2==e.type&&(a.type=e.type,a.refuse_reason=e.refuse_reason,t.objOrderRefund(a));case 20:n.next=34;break;case 22:if(8!=i.status){n.next=28;break}a.type=e.type,a.refuse_reason=e.refuse_reason,t.objOrderRefund(a),n.next=34;break;case 28:if(c){n.next=30;break}return n.abrupt("return",t.$util.Tips({title:"请输入备注"}));case 30:a.remark=c,l="",l=-3==i.where.status?(0,s.setAdminRefundRemark)(a):(0,s.setAdminOrderRemark)(a),l.then((function(e){i.change=!1,t.$util.Tips({title:e.msg,icon:"success"}),i.init()}),(function(e){i.change=!1,i.$util.Tips({title:e})}));case 34:case"end":return n.stop()}}),n)})))()})),(0,u.default)(a,"toDetail",(function(t){e.navigateTo({url:"/pages/admin/refundOrderDetail/index?id=".concat(t.order_id)})})),(0,u.default)(a,"offlinePay",(function(e){var t=this;this.openErp||(0,s.setOfflinePay)({order_id:e.order_id}).then((function(e){t.$util.Tips({title:e.msg,icon:"success"}),t.init()}),(function(e){t.$util.Tips(e)}))})),(0,u.default)(a,"dateChange",(function(e){this.filterShow=!1,this.where.apply_type=e,this.init()})),(0,u.default)(a,"payChange",(function(e){this.filterShow=!1,this.where.pay_type=e,this.init()})),(0,u.default)(a,"goLogistics",(function(t){e.navigateTo({url:"/pages/admin/logistics/index?type=refund&orderId="+t.order_id})})),a),onReachBottom:function(){this.getIndex()}};t.default=f}).call(this,n("df3c")["default"])},ed5f:function(e,t,n){"use strict";n.r(t);var i=n("e9cb"),a=n.n(i);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);t["default"]=a.a},fec1:function(e,t,n){"use strict";(function(e,t){var i=n("47a9");n("f076");i(n("3240"));var a=i(n("9422"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(a.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])}},[["fec1","common/runtime","common/vendor","pages/admin/common/vendor"]]]);