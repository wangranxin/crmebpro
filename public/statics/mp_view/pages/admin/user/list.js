require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/admin/user/list"],{"329e":function(e,i,t){"use strict";var n=t("c015"),s=t.n(n);s.a},"65af":function(e,i,t){"use strict";(function(e,i){var n=t("47a9");t("f076");n(t("3240"));var s=n(t("6e6d"));e.__webpack_require_UNI_MP_PLUGIN__=t,i(s.default)}).call(this,t("3223")["default"],t("df3c")["createPage"])},"68d3":function(e,i,t){"use strict";t.d(i,"b",(function(){return n})),t.d(i,"c",(function(){return s})),t.d(i,"a",(function(){}));var n=function(){var e=this.$createElement,i=(this._self._c,this.userLists.length),t=0==this.userLists.length&&!this.loading,n=this.administer?this.getIds().length:null;this.$mp.data=Object.assign({},{$root:{g0:i,g1:t,g2:n}})},s=[]},"6e6d":function(e,i,t){"use strict";t.r(i);var n=t("68d3"),s=t("dadf");for(var l in s)["default"].indexOf(l)<0&&function(e){t.d(i,e,(function(){return s[e]}))}(l);t("329e");var a=t("828b"),o=Object(a["a"])(s["default"],n["b"],n["c"],!1,null,"7bdddfbc",null,!1,n["a"],void 0);i["default"]=o.exports},"863d":function(e,i,t){"use strict";(function(e){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=t("6af6"),s={components:{editLable:function(){t.e("pages/admin/user/components/userLable/index").then(function(){return resolve(t("7ec1"))}.bind(null,t)).catch(t.oe)},editBalance:function(){t.e("pages/admin/user/components/editBalance/index").then(function(){return resolve(t("8133"))}.bind(null,t)).catch(t.oe)},member:function(){t.e("pages/admin/user/components/member/index").then(function(){return resolve(t("18b0b"))}.bind(null,t)).catch(t.oe)},coupon:function(){t.e("pages/admin/user/components/coupon/index").then(function(){return resolve(t("086d"))}.bind(null,t)).catch(t.oe)},userFilter:function(){t.e("pages/admin/user/components/filter/index").then(function(){return resolve(t("ebea"))}.bind(null,t)).catch(t.oe)},footerPage:function(){Promise.all([t.e("pages/admin/common/vendor"),t.e("pages/admin/components/footerPage/index")]).then(function(){return resolve(t("49d8"))}.bind(null,t)).catch(t.oe)},emptyPage:function(){t.e("components/emptyPage").then(function(){return resolve(t("398a"))}.bind(null,t)).catch(t.oe)},Loading:function(){t.e("components/Loading/index").then(function(){return resolve(t("e83c"))}.bind(null,t)).catch(t.oe)}},data:function(){return{getHeight:this.$util.getWXStatusHeight(),editList:[{name:"修改积分"},{name:"修改余额"},{name:"修改等级"},{name:"赠送会员"},{name:"赠送优惠券"}],administer:0,isAllSelect:!1,userLists:[],visible:!1,visibleLable:!1,loadTitle:"加载更多",loading:!1,loadend:!1,limit:20,page:1,keyword:"",visibleBalance:!1,type:0,visibleMember:!1,visibleCoupon:!1,uid:0,groupArray:[],userInfo:{},levelArray:[],visibleFilter:!1,filterData:{labelIds:"",groupIds:0,levelIds:0}}},onShow:function(){},onLoad:function(){this.userList(),this.groupList()},methods:{goarrow:function(){e.navigateBack()},filterChange:function(e){this.visibleFilter=!1,this.filterData=e,this.init()},filterCloseDrawer:function(){this.visibleFilter=!1},filterTap:function(){this.visibleFilter=!0,this.$refs.filter.productLabel(),this.levelList()},sendCoupon:function(){this.getIds().length?(this.visibleCoupon=!0,this.$refs.coupon.userCoupon(1,this.getIds())):this.$util.Tips({title:"请选择商品"})},levelList:function(){var e=this;(0,n.getLevelList)().then((function(i){e.levelArray=i.data.list})).catch((function(i){e.$util.Tips({title:i})}))},groupList:function(){var e=this;(0,n.getGroupList)().then((function(i){e.groupArray=i.data})).catch((function(i){e.$util.Tips({title:i})}))},userUpdate:function(e){var i=this;(0,n.postUserUpdate)(e).then((function(e){i.$util.Tips({title:e.msg})})).catch((function(e){i.$util.Tips({title:e})}))},bindLevelChange:function(e){this.userUpdate({type:1,uid:this.uid,level:this.levelArray[e.detail.value].id}),this.init()},bindPickerChange:function(e){this.getIds().length?this.userUpdate({type:4,uid:this.getIds(),group_id:this.groupArray[e.detail.value].id}):this.$util.Tips({title:"请选择商品"})},goDetails:function(i){e.navigateTo({url:"/pages/admin/user/index?uid="+i.uid})},couponCloseDrawer:function(){this.visibleCoupon=!1},memberCloseDrawer:function(){this.visibleMember=!1},balanceCloseDrawer:function(){this.visibleBalance=!1},successChange:function(){this.visibleMember=!1,this.visibleBalance=!1,this.init()},editLabels:function(){this.getIds().length?(this.visibleLable=!0,this.visible=!1,this.$refs.lable.productLabel({},1,this.getIds())):this.$util.Tips({title:"请选择商品"})},getIds:function(){var e=[];return this.userLists.forEach((function(i){i.checked&&e.push(i.uid)})),e.slice(0,100),e},init:function(){this.userLists=[],this.page=1,this.loadend=!1,this.loading=!1,this.userList()},searchSubmit:function(){this.init()},userList:function(){var e=this,i=this;this.loading||this.loadend||(i.loading=!0,i.loadTitle="",(0,n.getUserList)({page:i.page,limit:i.limit,nickname:i.keyword,group_id:i.filterData.groupIds,level:i.filterData.levelIds,label_id:i.filterData.labelIds}).then((function(t){var n=t.data.list;n.forEach((function(e){e.checked=!1})),e.isAllSelect=!1;var s=n.length<i.limit;i.userLists=i.$util.SplitArray(n,i.userLists),i.$set(i,"userLists",i.userLists),i.loadend=s,i.loadTitle=s?"没有更多内容啦~":"加载更多",i.page=i.page+1,i.loading=!1})).catch((function(e){i.loading=!1,i.loadTitle="加载更多"})))},editInfo:function(e){switch(e){case 0:this.visible=!1,this.visibleBalance=!0,this.type=0;break;case 1:this.visible=!1,this.visibleBalance=!0,this.type=1;break;case 2:this.visible=!1;break;case 3:this.visible=!1,this.visibleMember=!0;break;case 4:this.visible=!1,this.visibleCoupon=!0;break}},lableCloseDrawer:function(){this.visibleLable=!1},openDrawer:function(e){this.visible=!0,this.uid=e.uid,this.userInfo=e,this.levelList(),this.$refs.coupon.userCoupon(0)},closeDrawer:function(){this.visible=!1},manageTap:function(){this.administer=!this.administer},checkboxChange:function(e){var i=e.detail.value;this.userLists.forEach((function(e){-1!==i.indexOf(e.uid+"")?e.checked=!0:e.checked=!1})),i.length==this.userLists.length?this.isAllSelect=!0:this.isAllSelect=!1},forGoods:function(e){this.userLists.length&&this.userLists.forEach((function(i){i.checked=!!e}))},checkboxAllChange:function(e){var i=e.detail.value;i.length?(this.userLists.length>100&&this.$util.Tips({title:"每次最多只提交100条数据"}),this.isAllSelect=!0,this.forGoods(1)):(this.isAllSelect=!1,this.forGoods(0))}},onReachBottom:function(){this.userList()}};i.default=s}).call(this,t("df3c")["default"])},c015:function(e,i,t){},dadf:function(e,i,t){"use strict";t.r(i);var n=t("863d"),s=t.n(n);for(var l in n)["default"].indexOf(l)<0&&function(e){t.d(i,e,(function(){return n[e]}))}(l);i["default"]=s.a}},[["65af","common/runtime","common/vendor"]]]);