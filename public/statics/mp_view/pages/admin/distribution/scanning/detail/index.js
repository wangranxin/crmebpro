require('../../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/admin/distribution/scanning/detail/index"],{"008b":function(t,i,n){"use strict";n.r(i);var s=n("e0ab"),e=n("0788");for(var r in e)["default"].indexOf(r)<0&&function(t){n.d(i,t,(function(){return e[t]}))}(r);n("f4e1");var u=n("828b"),c=Object(u["a"])(e["default"],s["b"],s["c"],!1,null,"748b28ab",null,!1,s["a"],void 0);i["default"]=c.exports},"0788":function(t,i,n){"use strict";n.r(i);var s=n("b818"),e=n.n(s);for(var r in s)["default"].indexOf(r)<0&&function(t){n.d(i,t,(function(){return s[t]}))}(r);i["default"]=e.a},"8b71":function(t,i,n){},b818:function(t,i,n){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var s=n("6af6"),e=(n("28d0"),{components:{writeOffSwitching:function(){n.e("pages/admin/components/writeOffSwitching/index").then(function(){return resolve(n("8189"))}.bind(null,n)).catch(n.oe)}},props:{idss:{type:Number,default:0},code:{type:String,default:""},let:{type:Number,default:0}},data:function(){return{nums:[],newList:[],reduce_show:-1,plus_show:-1,ids:[],lets:0,listlet:0,attr:{cartAttr:!1,id:[],code:"",type:0},id:0,list:[],lists:[],lengt:0,box:!1,checked:!1,checkModel:[],isAllSelect:!1,data:[{id:"1",value:"aaa"},{id:"2",value:"bbb"},{id:"3",value:"ccc"}],writeOffNum:0,auth:1,numChecked:0}},watch:{checkModel:function(t){this.lengt==this.checkModel.length?this.checked=!0:this.checked=!1}},onLoad:function(t){this.id=t.id,this.attr.code=t.code,this.lets=t.let,this.auth=t.auth,this.getList(this.id)},onShow:function(){},methods:{numInput:function(t,i){var n=this,s=i.detail.value;s&&(s=Number(s),this.$nextTick((function(){s>n.list.cart_info[t].surplus_num?n.list.cart_info[t].surplus_num_input=n.list.cart_info[t].surplus_num:s<1&&(n.list.cart_info[t].surplus_num_input=1);for(var i=0,e=0;e<n.list.cart_info.length;e++)n.list.cart_info[e].is_writeoff||n.list.cart_info[e].checked&&(i+=Number(n.list.cart_info[e].surplus_num_input));n.numChecked=i})))},num:function(){for(var t=0;t<this.lists.cart_info.length;t++)this.nums.push({num:0})},subCart:function(t,i){1==t.surplus_num_input?this.reduce_show=i:(this.nums[i].num--,t.surplus_num_input--);for(var n=0,s=0;s<this.list.cart_info.length;s++)this.list.cart_info[s].is_writeoff||this.list.cart_info[s].checked&&(n+=this.list.cart_info[s].surplus_num_input);this.numChecked=n},addCart:function(t,i){t.surplus_num_input==t.surplus_num?this.plus_show=i:(t.surplus_num_input++,this.nums[i].num++);for(var n=0,s=0;s<this.list.cart_info.length;s++)this.list.cart_info[s].is_writeoff||this.list.cart_info[s].checked&&(n+=this.list.cart_info[s].surplus_num_input);this.numChecked=n},checkAll:function(){var t=this.list.cart_info;if(this.checked){this.checkModel=[];for(var i=0,n=this.list.cart_info.length;i<n;++i){var s=t[i];this.$set(s,"checked",!1)}}else{this.checkModel=[];for(i=0,n=this.list.cart_info.length;i<n;++i){var e=t[i];this.$set(e,"checked",!0),1==e.is_writeoff?this.checkModel=this.checkModel.filter((function(t){return t!=t.cart_id})):this.checkModel.push(e.cart_id)}this.lengt=this.checkModel.length}for(var r=0,u=0;u<this.list.cart_info.length;u++)this.list.cart_info[u].is_writeoff||this.list.cart_info[u].checked&&(r+=Number(this.list.cart_info[u].surplus_num_input));this.numChecked=r},dan:function(t,i){if(!this.list.cart_info[i].is_writeoff){-1==this.checkModel.indexOf(t)?(this.$set(this.list.cart_info[i],"checked",!0),this.checkModel.push(t)):(this.$set(this.list.cart_info[i],"checked",!1),this.checkModel=this.checkModel.filter((function(i){return i!=t})));for(var n=0,s=0;s<this.list.cart_info.length;s++)this.list.cart_info[s].is_writeoff||this.list.cart_info[s].checked&&(n+=Number(this.list.cart_info[s].surplus_num_input));this.numChecked=n}},getList:function(t){var i=this;(0,s.orderCartInfo)({oid:t,auth:this.auth}).then((function(t){for(var n=0;n<t.data.cart_info.length;n++)t.data.cart_info[n].surplus_num_input=t.data.cart_info[n].surplus_num;i.list=t.data,i.lists=JSON.parse(JSON.stringify(t.data)),i.listlet=t.data.cart_info.length,i.$set(i.attr,"id",i.list.id),i.checkAll(),i.num()}))},onDataId:function(t){this.nums.forEach((function(t){t.num=0})),this.id=t,this.getList(t)},switchs:function(){this.attr.cartAttr=!0,this.$refs.writeOff.getList(2)},onMyEvent:function(){this.attr.cartAttr=!1},verification:function(){var i=this,n={};for(var e in this.checkModel)n[e]=this.checkModel[e];for(var r=Object.keys(n).map((function(t){return{cart_id:n[t]}})),u=0;u<r.length;u++)for(var c=0;c<this.list.cart_info.length;c++)r[u].cart_id==this.list.cart_info[c].cart_id&&(r[u].cart_num=this.list.cart_info[c].surplus_num_input);if(this.newList=r,0==i.checkModel.length)i.$util.Tips({title:"请选择商品"});else{t.showLoading({title:"加载中"});var o=0;r.forEach((function(t){o+=parseInt(t.cart_num)})),this.writeOffNum=o,setTimeout((function(){(0,s.orderWriteoff)({auth:i.auth,oid:i.id,cart_ids:i.newList}).then((function(n){t.hideLoading(),i.box=!0})).catch((function(n){i.$util.Tips({title:n}),t.hideLoading()}))}),1e3)}},ok:function(i){this.box=!1,this.nums.forEach((function(t){t.num=0})),this.getList(this.id),i&&t.redirectTo({url:"/pages/admin/orderDetail/index?id="+this.list.order_id+"&types=3"})}}});i.default=e}).call(this,n("df3c")["default"])},e0ab:function(t,i,n){"use strict";n.d(i,"b",(function(){return s})),n.d(i,"c",(function(){return e})),n.d(i,"a",(function(){}));var s=function(){var t=this,i=t.$createElement,n=(t._self._c,t.__map(t.list.cart_info,(function(i,n){var s=t.__get_orig(i),e=0==i.is_writeoff&&t.lists.cart_info[n].surplus_num!=t.lists.cart_info[n].cart_num?parseInt(t.lists.cart_info[n].cart_num-t.lists.cart_info[n].surplus_num):null;return{$orig:s,m0:e}}))),s=t.box?parseInt(t.list.writeoff_count):null,e=t.box?1==t.lets&&t.list.total_num==parseInt(t.list.writeoff_count)+t.writeOffNum:null,r=t.box?t.lets>1&&t.list.total_num!=parseInt(t.list.writeoff_count)+t.writeOffNum:null,u=t.box?t.lets>1&&t.list.total_num==parseInt(t.list.writeoff_count)+t.writeOffNum||1==t.lets&&t.list.total_num!=parseInt(t.list.writeoff_count)+t.writeOffNum:null,c=t.box?parseInt(t.list.writeoff_count):null,o=t.box?t.lets>1&&t.list.total_num==parseInt(t.list.writeoff_count)+t.writeOffNum:null;t.$mp.data=Object.assign({},{$root:{l0:n,m1:s,m2:e,m3:r,m4:u,m5:c,m6:o}})},e=[]},f4e1:function(t,i,n){"use strict";var s=n("8b71"),e=n.n(s);e.a},f7fc:function(t,i,n){"use strict";(function(t,i){var s=n("47a9");n("f076");s(n("3240"));var e=s(n("008b"));t.__webpack_require_UNI_MP_PLUGIN__=n,i(e.default)}).call(this,n("3223")["default"],n("df3c")["createPage"])}},[["f7fc","common/runtime","common/vendor"]]]);